"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4773],{527671:(e,i,c)=>{c.r(i),c.d(i,{default:()=>F});var s=c(286326),a=c(597598),n=c.n(a),t=c(255530),l=c.n(t),r=c(557344),o=c(592353),_=c(33118),d=c(504377),u=c(919796),h=c(291218),g=c(500309),p=c(414646),v=c(478784),x=c(922087),m=c(852691),b=c(836870);const y=({currency:e,loginid:i,is_virtual:c})=>"MF"===i.replace(/\d/g,"")?(0,b.jsx)(_.Localize,{i18n_default_text:"Multipliers"}):c?(0,b.jsx)(_.Localize,{i18n_default_text:"Demo"}):e?(0,d.getCurrencyName)(e):(0,b.jsx)(_.Localize,{i18n_default_text:"No currency assigned"}),w=({has_error:e,market_type:i,sub_account_type:c,platform:a,server:n,product:t,is_dark_mode_on:r,is_eu:u,shortcode:h,should_show_server_name:g})=>{var p,v;const x=(0,d.getCFDAccountDisplay)({market_type:i,sub_account_type:c,platform:a,is_eu:u,shortcode:h,product:t}),m=s.useCallback((e=>{if(e){var i;const a=null===(i=e.server_info)||void 0===i||null===(i=i.geolocation)||void 0===i?void 0:i.region;var c,s;if(a)return`${a} ${1===(null==e||null===(c=e.server_info)||void 0===c||null===(c=c.geolocation)||void 0===c?void 0:c.sequence)?"":null==e||null===(s=e.server_info)||void 0===s||null===(s=s.geolocation)||void 0===s?void 0:s.sequence}`}return""}),[]);if(e)return(0,b.jsxs)("div",{children:[(0,b.jsx)(o.Text,{color:"disabled",size:"xs",children:(0,b.jsx)(_.Localize,{i18n_default_text:"Unavailable"})}),(null==n||null===(p=n.server_info)||void 0===p?void 0:p.geolocation)&&g&&"synthetic"===i&&"svg"===h&&(0,b.jsx)(o.Text,{color:"less-prominent",size:"xxs",className:"badge-server badge-server--disabled",children:m(n)})]});const y=(0,d.isBot)();return(0,b.jsxs)("div",{children:["dxtrade"===a&&x===(0,_.localize)("Derived")?(0,_.localize)("Synthetic"):x,(null==n||null===(v=n.server_info)||void 0===v?void 0:v.geolocation)&&g&&"synthetic"===i&&"svg"===h&&(0,b.jsx)(o.Text,{color:r?"general":"colored-background",size:"xxs",className:l()("badge-server",{"badge-server-bot":y}),children:m(n)})]})},j=({balance:e,currency:i,currency_icon:c,display_type:a,has_balance:n,has_error:t,has_reset_balance:r,is_dark_mode_on:u,is_disabled:h,is_virtual:g,is_eu:p,product:v,loginid:x,market_type:m,redirectAccount:j,onClickResetVirtualBalance:f,selected_loginid:N,server:k,shortcode:C,sub_account_type:z,platform:D,should_show_server_name:A})=>{const T=i?c:"IcCurrencyUnknown";return(0,b.jsx)(s.Fragment,{children:(0,b.jsx)("div",{id:`dt_${x}`,className:l()("acc-switcher__account",{"acc-switcher__account--selected":x===N,"acc-switcher__account--disabled":h}),onClick:()=>{h||j()},children:(0,b.jsxs)("span",{className:"acc-switcher__id",children:[(0,b.jsx)(o.Icon,{icon:g?"IcCurrencyVirtual":T,className:"acc-switcher__id-icon",size:24}),(0,b.jsxs)("span",{children:["currency"===a?(0,b.jsx)(y,{currency:i,loginid:x,is_virtual:g}):(0,b.jsx)(w,{is_eu:p,market_type:m,server:k,sub_account_type:z,has_error:t,platform:D,product:v,is_dark_mode_on:u,shortcode:C,should_show_server_name:A}),(0,b.jsx)("div",{className:l()("acc-switcher__loginid-text",{"acc-switcher__loginid-text--disabled":t}),children:x})]}),r?(0,b.jsx)(o.Button,{is_disabled:h,onClick:e=>{e.stopPropagation(),f()},className:"acc-switcher__reset-account-btn",secondary:!0,small:!0,children:(0,_.localize)("Reset balance")}):n&&(0,b.jsx)(o.Text,{size:"xs",color:"prominent",styles:{fontWeight:"inherit"},className:"acc-switcher__balance",children:i&&(0,b.jsx)(o.Money,{currency:(0,d.getCurrencyDisplayCode)(i),amount:(0,d.formatMoney)(i,e,!0),should_format:!1,show_currency:!0})})]})})})},f=({children:e,header:i,is_visible:c,toggleVisibility:s})=>(0,b.jsx)(o.ContentExpander,{className:"acc-switcher",title:i,is_expanded:c,onToggle:s,is_title_spaced:!0,children:e});f.propTypes={children:n().node,header:n().oneOfType([n().object,n().string]),is_visible:n().bool,toggleVisibility:n().func};const N=f,k=(e,i)=>[...e].sort(((e,c)=>{if(e.is_virtual||c.is_virtual)return e.is_virtual?1:-1;const s=parseFloat(i[e.loginid].balance);return parseFloat(i[c.loginid].balance)-s})),C=e=>[...e].sort(((e,i)=>{const c=z(e),s=z(i);return c&&!s?1:s&&!c||"gaming"===e.market_type||"synthetic"===e.market_type?-1:"financial"===e.sub_account_type?"gaming"===i.market_type||"synthetic"===i.market_type?1:-1:1})),z=e=>"demo"===e.account_type,D=(0,g.observer)((({history:e,is_mobile:i,is_visible:c})=>{var a,n,t;const{client:r,ui:u,traders_hub:h}=(0,p.A)(),{available_crypto_currencies:g,loginid:y,accounts:w,account_type:f,account_list:D,currency:A,is_eu:T,is_landing_company_loaded:I,is_low_risk:S,is_high_risk:M,is_logged_in:R,is_virtual:F,has_fiat:L,mt5_login_list:W,obj_total_balance:$,switchAccount:B,resetVirtualBalance:U,has_active_real_account:V,upgradeable_landing_companies:E,real_account_creation_unlock_date:O,has_any_real_account:q,virtual_account_loginid:P,has_maltainvest_account:G}=r,{show_eu_related_content:H,content_flag:K,selectRegion:Y,setTogglePlatformType:J}=h,{is_dark_mode_on:Q,openRealAccountSignup:X,toggleAccountsDialog:Z,toggleSetCurrencyModal:ee,should_show_real_accounts_list:ie,setShouldShowCooldownModal:ce}=u,[se,ae]=s.useState(!F||ie?0:1),[ne,te]=s.useState(!0),[le,re]=s.useState(!0),[oe,_e]=s.useState(!0),[de,ue]=s.useState(!0),he=s.useRef(),ge=s.useRef(null),pe=$.currency,ve=null===(a=D.find((e=>e.is_virtual)))||void 0===a?void 0:a.loginid,xe=w[ve]?w[ve].currency:"USD",me=e=>{switch(e){case"demo_deriv":return te(!ne);case"real_deriv":return re(!le);case"non-eu-regulator":return _e(!oe);case"eu-regulator":return ue(!de);default:return!1}},be=()=>{Z(!1)};(0,o.useOnClickOutside)(he,be,(e=>c&&!e.target.classList.contains("acc-info")));const ye=async e=>{be(),y!==e&&await B(e)},we=async()=>{be(),U()},je=0===se,fe=1===se,Ne=()=>H||F||!(g.length<1&&!L||!F)||S?E:[],ke=(0,v.A)();if(!R)return!1;const Ce=e=>(null==e?void 0:e.is_virtual)&&1e4!==(null==e?void 0:e.balance),ze=()=>{const e=[];return(()=>{if(I)return K===d.ContentFlag.LOW_RISK_CR_NON_EU?C(W).filter((e=>!z(e)&&"maltainvest"!==e.landing_company_short)):C(W).filter((e=>!z(e)));return[]})().map((i=>{"svg"===i.landing_company_short&&"synthetic"===i.market_type&&(e.length?e.forEach((c=>(c.server!==i.server&&e.push(i),e))):e.push(i))})),e.length>1},De=e=>k(D,w).filter((i=>!i.is_virtual&&i.loginid.startsWith(e))).length>1,Ae=null===(n=D.find((e=>{var i;return null===(i=e.loginid)||void 0===i?void 0:i.startsWith("CR")})))||void 0===n?void 0:n.loginid,Te=(0,b.jsx)("div",{className:"acc-switcher__list-wrapper",children:ve&&(0,b.jsx)(N,{header:(0,_.localize)("Deriv account"),is_visible:ne,toggleVisibility:()=>{me("demo_deriv")},children:(0,b.jsx)("div",{className:"acc-switcher__accounts",children:k(D,w).filter((e=>e.is_virtual)).map((e=>(0,b.jsx)(j,{is_dark_mode_on:Q,balance:w[e.loginid].balance,currency:w[e.loginid].currency,currency_icon:`IcCurrency-${e.icon}`,display_type:"currency",has_balance:"balance"in w[e.loginid],has_reset_balance:Ce(w[y]),is_disabled:e.is_disabled,is_virtual:e.is_virtual,loginid:e.loginid,product:e.product,redirectAccount:e.is_disabled?void 0:()=>ye(e.loginid),onClickResetVirtualBalance:we,selected_loginid:y},e.loginid)))})})}),Ie=(0,b.jsx)("div",{ref:ge,className:"acc-switcher__list-wrapper",children:(0,b.jsxs)(s.Fragment,{children:[!T||S?(0,b.jsxs)(N,{className:"acc-switcher__title",header:S&&G?(0,_.localize)("Non-EU Deriv "+(De("CR")?"accounts":"account")):(0,_.localize)("Deriv "+(De("CR")?"accounts":"account")),is_visible:oe,toggleVisibility:()=>{me("real_deriv")},children:[(0,b.jsx)("div",{className:"acc-switcher__accounts",children:k(D,w).filter((e=>!e.is_virtual&&e.loginid.startsWith("CR"))).map((e=>(0,b.jsx)(j,{account_type:f,is_dark_mode_on:Q,balance:w[e.loginid].balance,currency:w[e.loginid].currency,currency_icon:`IcCurrency-${e.icon}`,display_type:"currency",has_balance:"balance"in w[e.loginid],is_disabled:e.is_disabled,is_virtual:e.is_virtual,is_eu:T,loginid:e.loginid,redirectAccount:e.is_disabled?void 0:()=>ye(e.loginid),selected_loginid:y,should_show_server_name:ze()},e.loginid)))}),!Ae&&Ne().filter((e=>"svg"===e)).map(((e,i)=>(0,b.jsxs)("div",{className:"acc-switcher__new-account",children:[(0,b.jsx)(o.Icon,{icon:"IcDeriv",size:24}),(0,b.jsx)(o.Text,{size:"xs",color:"general",className:"acc-switcher__new-account-text",children:(0,x.S)(e)}),(0,b.jsx)(o.Button,{id:"dt_core_account-switcher_add-new-account",onClick:()=>{O?(be(),ce(!0)):(Y("Non-EU"),X("svg"))},className:"acc-switcher__new-account-btn",secondary:!0,small:!0,children:(0,_.localize)("Add")})]},i)))]}):null,!M&&G||T?(0,b.jsxs)(N,{header:S&&G?(0,_.localize)("EU Deriv "+(De("MF")?"accounts":"account")):(0,_.localize)("Deriv "+(De("MF")?"accounts":"account")),is_visible:de,toggleVisibility:()=>{me("real_deriv")},children:[(0,b.jsx)("div",{className:"acc-switcher__accounts",children:k(D,w).filter((e=>!e.is_virtual&&e.loginid.startsWith("MF"))).map((e=>(0,b.jsx)(j,{account_type:f,is_dark_mode_on:Q,balance:w[e.loginid].balance,currency:w[e.loginid].currency,currency_icon:`IcCurrency-${e.icon}`,display_type:"currency",has_balance:"balance"in w[e.loginid],is_disabled:e.is_disabled,is_virtual:e.is_virtual,is_eu:T,loginid:e.loginid,redirectAccount:e.is_disabled?void 0:()=>ye(e.loginid),selected_loginid:y,should_show_server_name:ze()},e.loginid)))}),Ne().filter((e=>"maltainvest"===e)).map(((e,i)=>(0,b.jsxs)("div",{className:"acc-switcher__new-account",children:[(0,b.jsx)(o.Icon,{icon:"IcDeriv",size:24}),(0,b.jsx)(o.Text,{size:"xs",color:"general",className:"acc-switcher__new-account-text",children:(0,x.S)(e)}),(0,b.jsx)(o.Button,{id:"dt_core_account-switcher_add-new-account",onClick:()=>{O?(be(),ce(!0)):(Y("EU"),X("maltainvest"))},className:"acc-switcher__new-account-btn",secondary:!0,small:!0,children:(0,_.localize)("Add")})]},i)))]}):null]})}),Se=null==D||null===(t=D.find((e=>/^(CR|MF)/.test(e.loginid))))||void 0===t?void 0:t.loginid,Me=()=>{const i=()=>(0,b.jsx)(s.Fragment,{children:(0,b.jsx)("div",{className:"acc-switcher__traders-hub",children:(0,b.jsx)(m.Sm,{onClick:async()=>{!F&&fe?await B(P):F&&je&&await B(Se),Z(!1),localStorage.setItem("redirect_to_th_os","home"),e.push(d.routes.traders_hub),J("cfd")},className:"acc-switcher__traders-hub--link",children:(0,b.jsx)(o.Text,{size:"xs",align:"center",className:"acc-switcher__traders-hub--text",children:(0,b.jsx)(_.Localize,{i18n_default_text:"Looking for CFD accounts? Go to Trader's Hub"})})})})});return je&&q||fe?(0,b.jsx)(i,{}):null};return(0,b.jsx)("div",{className:"acc-switcher__list",ref:he,"data-testid":"acc-switcher",children:I?(0,b.jsxs)(s.Fragment,{children:[(0,b.jsxs)(o.Tabs,{active_index:se,className:"acc-switcher__list-tabs",onTabItemClick:e=>ae(e),top:!0,children:[(0,b.jsxs)("div",{label:(0,_.localize)("Real"),id:"real_account_tab",children:[(0,b.jsx)(o.DesktopWrapper,{children:(0,b.jsx)(o.ThemedScrollbars,{height:"354px",children:Ie})}),(0,b.jsx)(o.MobileWrapper,{children:(0,b.jsx)(o.Div100vhContainer,{className:"acc-switcher__list-container",max_autoheight_offset:"234px",children:Ie})})]}),(0,b.jsxs)("div",{label:(0,_.localize)("Demo"),id:"dt_core_account-switcher_demo-tab",children:[(0,b.jsx)(o.DesktopWrapper,{children:(0,b.jsx)(o.ThemedScrollbars,{height:"354px",children:Te})}),(0,b.jsx)(o.MobileWrapper,{children:(0,b.jsx)(o.Div100vhContainer,{className:"acc-switcher__list-container",max_autoheight_offset:"234px",children:Te})})]})]}),(0,b.jsx)("div",{className:l()("acc-switcher__separator",{"acc-switcher__separator--auto-margin":i})}),(0,b.jsxs)("div",{className:"acc-switcher__total",children:[(0,b.jsx)(o.Text,{line_height:"s",size:"xs",weight:"bold",color:"prominent",children:(0,b.jsx)(_.Localize,{i18n_default_text:"Total assets"})}),(0,b.jsx)(o.Text,{size:"xs",color:"prominent",className:"acc-switcher__balance",children:(0,b.jsx)(o.Money,{currency:je?pe:xe,amount:(0,d.formatMoney)(je?pe:xe,je?$.amount_real:w[ve]?w[ve].balance:0,!0),show_currency:!0,should_format:!1})})]}),(0,b.jsx)(o.Text,{color:"less-prominent",line_height:"xs",size:"xxxs",className:"acc-switcher__total-subtitle",children:(0,_.localize)("Total assets in your Deriv accounts.")}),(0,b.jsx)("div",{className:"acc-switcher__separator"}),(0,b.jsx)(Me,{}),je&&V&&!F&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"acc-switcher__separator"}),(0,b.jsx)("div",{className:"acc-switcher__footer",children:(0,b.jsx)(o.Button,{className:"acc-switcher__btn--traders_hub",secondary:!0,onClick:!q||ke&&A?()=>X("manage"):()=>{be(),ee()},children:(0,_.localize)("Manage accounts")})})]})]}):(0,b.jsx)(o.Loading,{is_fullscreen:!1})})}));D.propTypes={is_visible:n().bool,history:n().object};const A=(0,h.withRouter)(D),T=e=>{const{disableApp:i,enableApp:c,is_visible:s,is_upgrade_enabled:a,toggle:n}=e;return(0,b.jsx)(o.Modal,{id:"dt_account_switcher_modal",className:"accounts-switcher",enableApp:c,is_open:s,is_vertical_top:!0,disableApp:i,has_close_icon:!1,toggleModal:n,height:"auto",width:"calc(100vw - 32px)",children:(0,b.jsx)(o.Div100vhContainer,{className:l()("acc-switcher__wrapper","acc-switcher__wrapper--is-mobile"),max_autoheight_offset:"48px",children:(0,b.jsx)(A,{is_mobile:!0,is_visible:!0,toggle:n,is_upgrade_enabled:a})})})};T.propTypes={children:n().any,disableApp:n().func,enableApp:n().func,is_visible:n().bool,is_upgrade_enabled:n().bool,onClose:n().func,title:n().string,toggle:n().func,visible:n().bool,wrapperClassName:n().string};const I=T;var S=c(141929);const M=({is_virtual:e,currency:i})=>(0,b.jsx)(o.Icon,{data_testid:"dt_icon",icon:`IcCurrency-${e?"virtual":null!=i?i:"Unknown"}`,className:`acc-info__id-icon acc-info__id-icon--${e?"virtual":i}`,size:24}),R=({acc_switcher_disabled_message:e,balance:i,currency:c,disableApp:s,enableApp:a,is_dialog_on:n,is_virtual:t,toggleDialog:h,is_disabled:g,is_mobile:p})=>{const v=null==c?void 0:c.toLowerCase(),{isDesktop:x}=(0,u.Y)();return(0,b.jsxs)("div",{className:"acc-info__wrapper",children:[x&&(0,b.jsx)("div",{className:"acc-info__separator"}),(0,b.jsx)(S.A,{is_disabled:g,disabled_message:e,is_mobile:p,children:(0,b.jsxs)("div",{"data-testid":"dt_acc_info",id:"dt_core_account-info_acc-info",className:l()("acc-info",{"acc-info--show":n,"acc-info--is-virtual":t,"acc-info--is-disabled":g}),onClick:g?void 0:()=>h(),children:[(0,b.jsx)("span",{className:"acc-info__id",children:(x||t||c)&&(0,b.jsx)(M,{is_virtual:t,currency:v})}),(0,b.jsxs)("div",{className:"acc-info__content",children:[(0,b.jsxs)("div",{className:"acc-info__account-type-header",children:[(0,b.jsx)(o.Text,{as:"p",size:"xxs",className:"acc-info__account-type",children:t?(0,_.localize)("Demo"):(0,_.localize)("Real")}),g?(0,b.jsx)(o.Icon,{data_testid:"dt_lock_icon",icon:"IcLock",className:"acc-info__select-arrow",size:12}):(0,b.jsx)(o.Icon,{data_testid:"dt_select_arrow",icon:"IcChevronDownBold",className:"acc-info__select-arrow",size:12})]}),(void 0!==i||!c)&&(0,b.jsx)("div",{className:"acc-info__balance-section",children:(0,b.jsx)("p",{"data-testid":"dt_balance",className:l()("acc-info__balance",{"acc-info__balance--no-currency":!c&&!t}),children:c?`${i} ${(0,d.getCurrencyDisplayCode)(c)}`:(0,b.jsx)(_.Localize,{i18n_default_text:"No currency assigned"})})})]})]})}),(0,b.jsx)("div",{className:"acc-info__separator"}),x?(0,b.jsx)(r.A,{in:n,timeout:200,classNames:{enter:"acc-switcher__wrapper--enter",enterDone:"acc-switcher__wrapper--enter-done",exit:"acc-switcher__wrapper--exit"},unmountOnExit:!0,children:(0,b.jsx)("div",{className:"acc-switcher__wrapper",children:(0,b.jsx)(A,{is_visible:n,toggle:h})})}):(0,b.jsx)(I,{is_visible:n,disableApp:s,enableApp:a,toggle:h})]})};R.propTypes={acc_switcher_disabled_message:n().string,balance:n().string,currency:n().string,disableApp:n().func,enableApp:n().func,is_dialog_on:n().bool,is_disabled:n().bool,is_virtual:n().bool,is_mobile:n().bool,loginid:n().string,toggleDialog:n().func};const F=R}}]);
//# sourceMappingURL=core.chunk.account-info.78973846415b1162ad96.js.map