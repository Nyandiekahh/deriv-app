"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[243],{217763:(e,i,a)=>{a.r(i),a.d(i,{default:()=>v});var t=a(286326),l=a(255530),s=a.n(l),n=a(824223),o=a(592353),r=a(504377),c=a(33118),m=a(596176),d=a(919796),_=a(978513),u=a(836870);const h=({identifier_title:e,is_modal_when_mobile:i=!1,is_open:a,has_live_chat:t=!1,onClickSendEmail:l,onClose:s})=>{const{isDesktop:n}=(0,d.Y)(),{localize:c}=(0,m.useTranslations)(),h=t?(0,u.jsx)(m.Localize,{i18n_default_text:"Still didn't get the email? Please contact us via <0>live chat.</0>",components:[(0,u.jsx)("span",{className:"send-email-template__footer-live-chat",onClick:()=>{s(),_.Chat.open()},children:(0,u.jsx)(o.Popover,{className:"send-email-template__footer-live-chat__link",classNameBubble:"help-centre__tooltip",alignment:"top",message:c("Live chat"),zIndex:"9999"})},0)]}):null,p=(0,u.jsx)(o.SendEmailTemplate,{className:"sent-email",subtitle:(()=>{let i="";switch(e){case r.CFD_PLATFORMS.DXTRADE:i=(0,u.jsx)(m.Localize,{i18n_default_text:"Please click on the link in the email to change your <0>{{platform_name_dxtrade}}</0> password.",components:[(0,u.jsx)("span",{className:"send-email-template__subtitle-platform"},0)],values:{platform_name_dxtrade:(0,r.getPlatformSettings)("dxtrade").name}});break;case r.CFD_PLATFORMS.MT5:i=c("Please click on the link in the email to change your Deriv MT5 password.");break;case"Google":case"Facebook":i=c("Check your {{ identifier_title }} account email and click the link in the email to proceed.",{identifier_title:e});break;case"Change_Email":i=c("Check your email and click the link in the email to proceed.");break;default:i=c("Please click on the link in the email to reset your password.")}return i})(),title:c("We’ve sent you an email"),lbl_no_receive:c("Didn't receive the email?"),txt_resend:c("Resend email"),txt_resend_in:c("Resend email in"),onClickSendEmail:l,live_chat:h,children:[{key:"email_spam",icon:"IcEmailSpam",content:(0,m.localize)("The email is in your spam folder (Sometimes things get lost there).")},{key:"wrong_email",icon:"IcEmail",content:(0,m.localize)("You accidentally gave us another email address (Usually a work or a personal one instead of the one you meant).")},{key:"wrong_typo",icon:"IcEmailTypo",content:(0,m.localize)("The email address you entered had a mistake or typo (happens to the best of us).")},{key:"email_firewall",icon:"IcEmailFirewall",content:(0,m.localize)("We can’t deliver the email to this address (Usually because of firewalls or filtering).")}].map((e=>(0,u.jsxs)("div",{className:"sent-email__content",children:[(0,u.jsx)(o.Icon,{icon:e.icon,size:32}),(0,u.jsx)(o.Text,{size:"xxs",as:"p",children:e.content})]},e.key)))});return n||i?(0,u.jsx)(o.Modal,{className:"sent-email__modal",is_open:a,has_close_icon:!0,should_header_stick_body:!0,title:"",toggleModal:s,width:"440px",children:(0,u.jsx)(o.Div100vhContainer,{className:"account__scrollbars_container-wrapper",is_disabled:n,height_offset:"80px",children:(0,u.jsxs)(o.Modal.Body,{children:[(0,u.jsx)("div",{onClick:s,className:"send-email-template__close","data-testid":"dt_send_email_template_close",children:(0,u.jsx)(o.Icon,{icon:"IcCross"})}),p]})})}):(0,u.jsx)(o.MobileDialog,{portal_element_id:"modal_root",title:c("We’ve sent you an email"),wrapper_classname:"mt5-email-sent",visible:a,onClose:s,has_content_scroll:!0,children:p})};var p=a(500309),x=a(414646);function g(e,i){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);i&&(t=t.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),a.push.apply(a,t)}return a}function f(e){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?g(Object(a),!0).forEach((function(i){b(e,i,a[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))}))}return e}function b(e,i,a){return(i=function(e){var i=function(e,i){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var t=a.call(e,i||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"==typeof i?i:i+""}(i))in e?Object.defineProperty(e,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[i]=a,e}const j=(0,p.observer)((({changed_email:e,is_open:i,onClose:a,prev_email:l,setErrorMessage:s,setEmailValue:n})=>{const[m,d]=t.useState(null),[_,p]=t.useState(!1),[g,b]=t.useState(i),{client:j}=(0,x.A)(),{verification_code:v,setVerificationCode:y,setPreventRedirectToHub:k}=j,w=()=>{r.WS.changeEmail(m)};return _?(0,u.jsx)(h,{is_open:_,onClose:()=>{p(!1),k(!1)},identifier_title:"Change_Email",onClickSendEmail:w,has_live_chat:!0,is_modal_when_mobile:!0}):(0,u.jsx)(o.Modal,{is_open:g,should_header_stick_body:!0,title:(0,u.jsx)(c.Localize,{i18n_default_text:"Are you sure?"}),toggleModal:a,width:"440px",has_close_icon:!1,children:(0,u.jsxs)(t.Fragment,{children:[(0,u.jsx)("div",{className:"email-confirmation",children:(0,u.jsx)(o.Text,{as:"p",color:"prominent",size:"xs",align:"left",children:(0,u.jsx)(c.Localize,{i18n_default_text:"Are you sure you want to update email <0>{{prev_email}}</0> to <1>{{changed_email}}</1>?",values:{prev_email:l,changed_email:e},components:[(0,u.jsx)("strong",{},0),(0,u.jsx)("strong",{className:"email-confirmation__currentEmail"},1)]})})}),(0,u.jsxs)(o.Modal.Footer,{children:[(0,u.jsx)(o.Button,{onClick:a,has_effect:!0,text:(0,c.localize)("Cancel"),secondary:!0,large:!0}),(0,u.jsx)(o.Button,{className:"email-change_button",has_effect:!0,onClick:()=>{(()=>{const i={change_email:"verify",new_email:e,verification_code:v.request_email};d((e=>f(f({},e),i))),r.WS.changeEmail(i).then((i=>{b(!1),i.error?(a(),n(e),s(i.error.message)):p(!0),(0,r.removeActionParam)("request_email"),y("","request_email")}))})()},primary:!0,large:!0,children:(0,u.jsx)(c.Localize,{i18n_default_text:"Confirm"})})]})]})})})),v=(0,p.observer)((()=>{const{ui:e,client:i}=(0,x.A)(),{disableApp:a,enableApp:l,is_loading:m,is_reset_email_modal_visible:d,toggleResetEmailModal:_}=e,{email:h}=i,[p,g]=t.useState(!1),[f,b]=t.useState(""),[v,y]=t.useState(""),k={email:v};return p?(0,u.jsx)(j,{changed_email:v,is_open:p,onClose:()=>g(!1),prev_email:h,setErrorMessage:b,setEmailValue:y}):(0,u.jsx)(n.Formik,{initialValues:k,initialStatus:{reset_complete:!1,error_msg:""},validate:e=>{const i={};return e.email?(0,r.validEmail)(e.email)||(i.email=(0,r.getErrorMessages)().email()):i.email=(0,c.localize)("The email input should not be empty."),i},onSubmit:e=>{y(e.email),g(!0)},children:({errors:e,values:i,touched:r,isSubmitting:h,handleBlur:p,handleChange:x,setFieldTouched:g,status:j})=>(0,u.jsx)(o.Dialog,{is_visible:d,disableApp:a,enableApp:l,is_loading:m,dismissable:j.error_msg||f,onConfirm:()=>_(!1),is_closed_on_cancel:!1,children:(0,u.jsx)("div",{className:"reset-email",children:(0,u.jsx)(n.Form,{children:(0,u.jsx)(t.Fragment,{children:j.reset_complete?(0,u.jsxs)("div",{className:"reset-email__email-selection",children:[(0,u.jsx)(o.Text,{as:"p",weight:"bold",className:"reset-email__heading",children:(0,u.jsx)(c.Localize,{i18n_default_text:"Your password has been changed"})}),(0,u.jsx)(o.Text,{align:"center",as:"p",size:"xxs",className:"reset-email__subtext",children:(0,u.jsx)(c.Localize,{i18n_default_text:"We will now redirect you to the login page."})})]}):(0,u.jsxs)("div",{className:"reset-email__email-selection",children:[(0,u.jsx)(o.Text,{as:"p",align:"left",weight:"bold",className:"reset-email__heading",children:(0,u.jsx)(c.Localize,{i18n_default_text:"Enter a new email address"})}),(0,u.jsx)(o.Text,{as:"p",color:"prominent",size:"xs",align:"left",className:"reset-email__descripton",children:(0,u.jsx)(c.Localize,{i18n_default_text:"You'll log in to your Deriv account with this email address."})}),(0,u.jsx)("fieldset",{className:"reset-email__fieldset",children:(0,u.jsx)(o.Input,{"data-lpignore":"true",type:"text",name:"email",id:"email",placeholder:(0,c.localize)("Email address"),value:i.email,required:!0,error:r.email&&e.email||f,onBlur:p,onChange:e=>{b(""),g("email",!0),x(e)}})}),(0,u.jsx)(o.Button,{className:s()("reset-email__btn",{"reset-email__btn--disabled":!i.email||e.email||h}),type:"submit",is_disabled:!i.email||!!e.email||h||!!f,primary:!0,large:!0,children:(0,u.jsx)(c.Localize,{i18n_default_text:"Confirm"})})]})})})})})})}))}}]);
//# sourceMappingURL=core.chunk.reset-email-modal.78973846415b1162ad96.js.map