"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3438],{857703:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var i=r(286326),n=r(255530),s=r.n(n),c=r(824223),o=r(597598),l=r.n(o),a=r(592353),u=r(504377),d=r(33118),b=r(76958),p=r(500309),f=r(414646),y=r(836870);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const m=(e,t)=>e.text.toLowerCase()===t.residence.toLowerCase(),h=({enableApp:e,onSetResidence:t,residence_list:r,toggleModalVisibility:n})=>{const o=t=>{if(t)throw Error(t);n(!1),e()};return(0,y.jsx)("div",{className:"set-residence",children:(0,y.jsx)(c.Formik,{initialValues:{residence:""},validate:e=>((e,t)=>{const r={};if(e.residence){const i=t.findIndex((t=>m(t,e)));-1!==i&&"DISABLED"!==t[i].disabled||(r.residence=(0,d.localize)("Unfortunately, {{website_name}} is not available in your country.",{website_name:u.website_name}))}else r.residence=!0;return r})(e,r),onSubmit:e=>{const i=r.findIndex((t=>m(t,e))),n=_(_({},e),{},{residence:r[i].value});t(n,o)},children:({isSubmitting:e,errors:t,values:n,setFieldValue:o,touched:l})=>(0,y.jsx)(c.Form,{children:(0,y.jsx)(i.Fragment,{children:(0,y.jsxs)(b.A,{errors:t,touched:l,setFieldValue:o,residence_list:r,children:[(0,y.jsx)(a.Text,{as:"p",size:"xxs",weight:"bold",className:"set-residence__subtext",children:(0,y.jsx)(d.Localize,{i18n_default_text:"We need this to make sure our service complies with laws and regulations in your country."})}),(0,y.jsx)(a.Button,{className:s()("set-residence__btn",{"set-residence__btn--disabled":!n.residence||t.residence||e}),type:"submit",is_disabled:!n.residence||!!t.residence||e,primary:!0,large:!0,children:(0,y.jsx)(d.Localize,{i18n_default_text:"Set residence"})})]})})})})})};h.propTypes={enableApp:l().func,onSetResidence:l().func,residence_list:l().array,toggleModalVisibility:l().func};const v=(0,p.observer)((()=>{const{ui:e,client:t}=(0,f.A)(),{is_set_residence_modal_visible:r,toggleSetResidenceModal:i,enableApp:n,disableApp:s,is_loading:c}=e,{onSetResidence:o,residence_list:l}=t;return l.length<1?null:(0,y.jsx)(a.Dialog,{is_visible:r,disableApp:s,enableApp:n,is_loading:c||!l.length,is_content_centered:!0,children:(0,y.jsx)(h,{onSetResidence:o,residence_list:l,toggleModalVisibility:i,enableApp:n})})}))},76958:(e,t,r)=>{r.d(t,{A:()=>f});var i=r(286326),n=r(824223),s=r(597598),c=r.n(s),o=r(592353),l=r(33118),a=r(836870);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=({children:e,class_prefix:t="set-residence",default_value:r,history_value:s,errors:c,onResidenceSelectionChanged:u,touched:b,setFieldTouched:p,setFieldValue:f,residence_list:y})=>{var j;return i.useEffect((()=>{r&&(p("residence",!0),f("residence",r,!0))}),[]),(0,a.jsxs)("div",{className:`${t}__residence-selection`,children:[(0,a.jsx)(n.Field,{name:"residence",children:({field:e})=>(0,a.jsx)(i.Fragment,{children:(0,a.jsx)(o.Autocomplete,d(d({},e),{},{autoComplete:"off",input_id:"dt_core_set-residence-form_signup-residence-select",type:"text",label:(0,l.localize)("Country of residence"),historyValue:s,error:b.residence&&c.residence,required:!0,list_items:y,onItemSelection:({value:e,text:t})=>{f("residence",e?t:"",!0),null==u||u()}}))})}),!(null!=c&&null!==(j=c.residence)&&void 0!==j&&j.length)&&(0,a.jsx)(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",color:"less-prominent",children:(0,a.jsx)(l.Localize,{i18n_default_text:"Select the country where you currently live."})}),(0,a.jsx)("div",{className:`${t}__button_wrapper`,children:e})]})};p.propTypes={children:c().object,class_prefix:c().string,default_value:c().string,history_value:c().string,errors:c().object,onResidenceSelectionChanged:c().func,residence_list:c().arrayOf(c().object),setFieldTouched:c().func,setFieldValue:c().func,touched:c().object};const f=p}}]);
//# sourceMappingURL=core.chunk.set-residence-modal.78973846415b1162ad96.js.map