/*! For license information please see MT5TradeModal.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@deriv-com/analytics"),require("@deriv/account/src/Configs/get-mt5-status-badge-config"),require("@deriv/components"),require("@deriv/hooks"),require("@deriv/shared"),require("@deriv/stores"),require("@deriv/translations"),require("classnames"),require("react")):"function"==typeof define&&define.amd?define(["@deriv-com/analytics","@deriv/account/src/Configs/get-mt5-status-badge-config","@deriv/components","@deriv/hooks","@deriv/shared","@deriv/stores","@deriv/translations","classnames","react"],t):"object"==typeof exports?exports["@deriv/cfd"]=t(require("@deriv-com/analytics"),require("@deriv/account/src/Configs/get-mt5-status-badge-config"),require("@deriv/components"),require("@deriv/hooks"),require("@deriv/shared"),require("@deriv/stores"),require("@deriv/translations"),require("classnames"),require("react")):e["@deriv/cfd"]=t(e["@deriv-com/analytics"],e["@deriv/account/src/Configs/get-mt5-status-badge-config"],e["@deriv/components"],e["@deriv/hooks"],e["@deriv/shared"],e["@deriv/stores"],e["@deriv/translations"],e.classnames,e.react)}(self,((e,t,a,r,n,o,c,l,i)=>(()=>{"use strict";var s,d={"./src/Containers/mt5-trade-modal.tsx":(e,t,a)=>{a.d(t,{default:()=>G});var r=a("react"),n=a.n(r),o=a("@deriv/components"),c=a("@deriv/hooks"),l=a("@deriv/stores"),i=a("@deriv/translations"),s=a("../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),d=a("./src/Stores/Modules/CFD/Helpers/useCfdStores.tsx"),m=a("../../node_modules/js-cookie/dist/js.cookie.mjs"),u=a("@deriv/shared"),_=a("classnames"),p=a.n(_),f=function(e){var t=e.text,a=e.className;return n().createElement("div",{className:a,"data-testid":"cfd_account_copy_main_div"},n().createElement(o.Clipboard,{text_copy:t,info_message:(0,u.isMobile)()?"":(0,i.localize)("copy"),success_message:(0,i.localize)("copied!"),popoverAlignment:(0,u.isMobile)()?"left":"bottom"}))};const v=function(e){var t=e.value,a=e.is_bold,r=e.is_broker;return n().createElement("div",{className:"cfd-trade-modal__spec-box "},n().createElement(o.Text,{size:"xs",weight:a?"bold":"",className:p()("cfd-trade-modal__spec-text",{"cfd-trade-modal__spec-text-broker":r})},t),n().createElement(f,{text:t,className:"cfd-trade-modal__spec-copy"}))};var h=function(){return n().createElement(n().Fragment,null,n().createElement("div",{className:"nakala-modal-maintenance"},n().createElement("div",{className:"nakala-modal-maintenance_icon"},n().createElement(o.Icon,{icon:"IcInfoYellow"})),n().createElement(o.Text,{size:"xxxs"},n().createElement(i.Localize,{i18n_default_text:"Server maintenance starts at 01:00 GMT every Sunday, and this process may take up to 2 hours to complete. Service may be disrupted during this time."}))))},g=(0,l.observer)((function(e){var t,a,c=e.isSuccess,l=void 0!==c&&c,s=e.nakalaInfo,d=function(){var e="nakala_linked";if(!m.A.get(e)){m.A.set(e,"true",{domain:".deriv.com",expires:365})}},_=(0,u.isDesktop)();(0,r.useEffect)((function(){_&&d()}),[_]);return n().createElement(n().Fragment,null,n().createElement("div",{className:"cfd-nakala-modal"},n().createElement("div",{className:"cfd-nakala-modal__logo-container"},n().createElement("div",{className:"cfd-nakala-modal__logo"},n().createElement(o.Icon,{icon:"IcRebrandingNakalaMt5Linked",className:"linked"}))),l&&n().createElement("div",{className:"cfd-nakala-modal__title"},n().createElement(o.Text,{as:"h3",weight:"bold",align:"center"},n().createElement(i.Localize,{i18n_default_text:"Your MT5 Standard account is ready"}))),n().createElement("div",{className:"cfd-nakala-modal__steps cfd-nakala-modal__steps--with-line"},n().createElement("div",{className:"cfd-nakala-modal__step"},n().createElement("div",{className:"cfd-nakala-modal__step-number"},n().createElement(o.Text,{weight:"bold",color:"colored-background"},"1")),n().createElement("div",{className:"cfd-nakala-modal__step-content"},n().createElement(o.Text,{as:"p"},n().createElement(i.Localize,{i18n_default_text:"To copy trade, create your Deriv Nakala account in the mobile app. "}),_&&n().createElement(i.Localize,{i18n_default_text:"Scan the below QR to download the mobile app."})))),_&&n().createElement("div",{className:"cfd-nakala-modal__qr-section"},n().createElement("div",{className:"cfd-nakala-modal__qr-section-code"},n().createElement(o.Icon,{icon:"IcRebrandingNakalaQrCode",height:120,width:120}))),n().createElement("div",{className:"cfd-nakala-modal__step"},n().createElement("div",{className:"cfd-nakala-modal__step-number"},n().createElement(o.Text,{weight:"bold",color:"colored-background"},"2")),n().createElement("div",{className:"cfd-nakala-modal__step-content"},n().createElement(o.Text,{as:"p"},n().createElement(i.Localize,{i18n_default_text:"Then, link your MT5 Standard account using these details and your MT5 password:"}))))),n().createElement("div",{className:"cfd-nakala-modal__login-specs"},n().createElement("div",{className:"cfd-nakala-modal__login-specs-item"},n().createElement(o.Text,{className:"cfd-nakala-modal--paragraph"},(0,i.localize)("Server")),n().createElement(v,{is_bold:!0,value:null!==(t=s.serverName)&&void 0!==t?t:""})),n().createElement("div",{className:"cfd-nakala-modal__login-specs-item"},n().createElement(o.Text,{className:"cfd-nakala-modal--paragraph"},(0,i.localize)("Account no.")),n().createElement(v,{is_bold:!0,value:null!==(a=s.loginId)&&void 0!==a?a:""})),n().createElement(h,null)),n().createElement("div",{className:"cfd-nakala-modal__help-section"},n().createElement(o.Text,{size:"xs"},(0,i.localize)("Need help?")," ",n().createElement("a",{href:"https://deriv.copytrade-resource.com/",target:"_blank",rel:"noreferrer"},(0,i.localize)("Check the guide"))))),!_&&n().createElement("div",{className:"cfd-nakala-modal__footer cfd-nakala-modal__footer--info-mobile"},n().createElement(o.Button,{type:"button",onClick:function(){d(),window.open("https://onelink.to/uuuxmw","_blank")},primary:!0,large:!0},n().createElement(i.Localize,{i18n_default_text:"Open Deriv Nakala mobile app"}))))}));var E=a("./src/Helpers/cfd-config.ts");const x=function(e){var t=e.onClick;return n().createElement("div",{className:"cfd-trade-modal__password-box"},n().createElement(o.Button,{className:"cfd-trade-modal__password-action",transparent:!0,onClick:t},n().createElement(i.Localize,{i18n_default_text:"Forgot password?"})))};var y=a("./src/Helpers/config.tsx"),b=a("./src/Helpers/constants.ts");const w=(0,l.observer)((function(e){var t,a,r,c=e.ctrader_derivx_trade_account,d=e.is_eu_user,m=e.onPasswordManager,_=e.toggleModal,p=e.dxtrade_tokens,f=e.ctrader_tokens,h=e.is_demo,g=e.platform,w=e.is_mobile,T=(0,s.Y)().isDesktop,N=(0,l.useStore)(),k=N.ui,z=N.client,D=N.common,I=N.traders_hub,S=N.modules.cfd,C=z.ctrader_accounts_list,A=z.ctrader_trading_platform_available_accounts,M=z.ctrader_total_balance,L=S.setAccountType,R=S.toggleMT5TradeModal,O=S.is_account_being_created,P=S.loadCTraderTokens,F=D.setAppstorePlatform,U=k.openDerivRealAccountNeededModal,j=I.selected_account_type,G=I.no_CR_account,q=I.is_real,$=I.has_any_real_account,Y=I.getAccount,V={header:n().createElement(o.Text,{as:"h2",size:"xs",weight:"bold",className:"cfd-trade-modal__expansion-panel--header"},(0,i.localize)("See important notes")),content:n().createElement("ol",{className:"cfd-trade-modal__expansion-panel--ordered-list"},n().createElement(o.Text,{as:"li",size:"xxs",line_height:"l",className:"cfd-trade-modal__expansion-panel--content"},(0,i.localize)("Use your Deriv account email and password to log in to cTrader.")),n().createElement(o.Text,{as:"li",size:"xxs",line_height:"l",className:"cfd-trade-modal__expansion-panel--content"},n().createElement(i.Localize,{i18n_default_text:"Manage up to {{max_count}} Deriv cTrader accounts. While you can convert any of your Deriv cTrader accounts into a strategy account, please take note of the following:",values:{max_count:null===(t=A[0])||void 0===t?void 0:t.max_count}})),n().createElement("ul",{className:"cfd-trade-modal__expansion-panel--unordered-list"},(0,b.AM)().map((function(e){return n().createElement(o.Text,{key:e,as:"li",size:"xxs",line_height:"l",className:"cfd-trade-modal__expansion-panel--content"},(0,i.localize)(e))})),n().createElement(o.Text,{as:"li",size:"xxs",line_height:"l",className:"cfd-trade-modal__expansion-panel--content"},n().createElement(i.Localize,{i18n_default_text:"To ensure you can always create and manage strategies with fees, <0>keep at least one account free from being a strategy provider.</0> This way, youâ€™ll always have an account ready for collecting fees, allowing you to have up to four strategies where you may impose fees.",components:[n().createElement("span",{key:0,className:"cfd-trade-modal__expansion-panel--content-bold"})]}))))};return n().createElement("div",{className:"cfd-trade-modal-container"},n().createElement("div",{className:"cfd-trade-modal"},function(e,t,a){return n().createElement(n().Fragment,null,n().createElement(o.Icon,{icon:"IcRebranding".concat(e.charAt(0).toUpperCase()).concat(e.slice(1),"Dashboard"),size:24}),n().createElement("div",{className:"cfd-trade-modal__desc"},n().createElement(o.Text,{size:"xs",line_height:"l",weight:"bold",className:"cfd-trade-modal__desc-heading"},n().createElement(i.Localize,{i18n_default_text:"Deriv {{platform}} <0>{{is_demo}}</0>",values:{platform:(0,b.Ci)(e),is_demo:t?"Demo":""},components:[n().createElement("span",{key:0,className:e===E.$_.CTRADER&&t?"cfd-trade-modal--tag":""})]})),(null==a?void 0:a.display_login)&&e===E.$_.DXTRADE||e===E.$_.CTRADER&&t&&n().createElement(o.Text,{color:"less-prominent",size:"xxxs",line_height:"xxxs"},null==a?void 0:a.display_login)))}(g,h,c),(null==c?void 0:c.display_balance)&&n().createElement("div",{className:"cfd-trade-modal__balance"},g===E.$_.CTRADER&&q&&n().createElement(o.Text,{size:"xxs",align:"right"},(0,i.localize)("Total balance:")),n().createElement(o.Text,{size:"s",color:g!==E.$_.CTRADER?"profit-success":"prominent",className:"cfd-trade-modal__desc-balance",weight:"bold"},n().createElement(o.Money,{amount:q&&g===E.$_.CTRADER?M:c.display_balance,currency:c.currency,has_sign:!!c.balance&&c.balance<0,show_currency:!0})))),n().createElement("div",{className:"cfd-trade-modal__login-specs"},g===E.$_.DXTRADE&&n().createElement(n().Fragment,null,n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(o.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Username")),n().createElement(v,{is_bold:!0,value:null==c?void 0:c.login})),n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(o.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Password")),n().createElement("div",{className:"cfd-trade-modal--paragraph"},n().createElement(x,{platform:"dxtrade",onClick:function(){var e=(0,u.getCFDAccountKey)({market_type:c.market_type,sub_account_type:c.sub_account_type,platform:E.$_.MT5,shortcode:c.landing_company_short});m(null==c?void 0:c.login,(0,b.LK)(c.market_type,d),c.account_type,e,null==c?void 0:c.server),_()}})))),g===E.$_.CTRADER&&q&&n().createElement(n().Fragment,null,C.filter((function(e){return"real"===e.account_type})).map((function(e){return n().createElement("div",{key:e.login,className:"cfd-trade-modal__list-of-accounts"},n().createElement(o.Text,{size:"xs"},e.login),n().createElement(o.Text,{size:"xs",weight:"bold"},n().createElement(o.Money,{amount:e.balance,currency:e.currency,has_sign:!!e.balance&&e.balance<0,show_currency:!0})))})),(null!==(a=null===(r=A[0])||void 0===r?void 0:r.available_count)&&void 0!==a?a:1)>0&&n().createElement("div",{className:"cfd-trade-modal__get-more-accounts"},n().createElement(o.Button,{onClick:function(){R(),$&&!G||!q?(L({category:j,type:"all"}),F(E.$_.CTRADER),Y()):U()},transparent:!0,disabled:!!O},n().createElement(o.Icon,{icon:"IcAppstoreGetMoreAccounts",size:24,className:"cfd-trade-modal__get-more-accounts--icon"}),n().createElement("div",{className:"cfd-trade-modal__get-more-accounts--details"},n().createElement(o.Text,{size:"xxs","line-height":"xxs"},(0,i.localize)("Get another cTrader account"))))),n().createElement("div",{className:"cfd-trade-modal__expansion-panel"},n().createElement(o.ExpansionPanel,{message:V}))),n().createElement("div",{className:"cfd-trade-modal__maintenance"},n().createElement(o.Icon,{icon:"IcAlertWarning",size:T?24:28,className:"cfd-trade-modal__maintenance-icon"}),n().createElement("div",{className:"cfd-trade-modal__maintenance-text"},n().createElement(o.Text,{size:"xxxs",className:"cfd-trade-modal__maintenance-text"},g===E.$_.DXTRADE&&n().createElement(i.Localize,{i18n_default_text:"Server maintenance starts at 06:00 GMT every Sunday and may last up to 2 hours. You may experience service disruption during this time."}),g===E.$_.MT5&&n().createElement(i.Localize,{i18n_default_text:"Server maintenance starts at 01:00 GMT every Sunday, and this process may take up to 2 hours to complete. Service may be disrupted during this time."}),g===E.$_.CTRADER&&n().createElement(i.Localize,{i18n_default_text:"Server maintenance occurs every first Saturday of the month from 7 to 10 GMT time. You may experience service disruption during this time."}))))),n().createElement("div",{className:"cfd-trade-modal__download-center-app"},function(e){var t="";if(e===E.$_.DXTRADE)t=(0,i.localize)("Run Deriv X on your browser");else{if("ctrader"!==e||w)return null;t=(0,i.localize)("Run cTrader on your browser")}return n().createElement("div",{className:"cfd-trade-modal__download-center-app--option"},n().createElement(o.Text,{className:"cfd-trade-modal__download-center-app--option-item",size:"xs"},t),n().createElement(y.vl,{platform:g,is_demo:h,dxtrade_tokens:p,ctrader_tokens:f,ctraderTokenCall:P}))}(g)),g===E.$_.CTRADER&&n().createElement(n().Fragment,null,!w&&n().createElement(n().Fragment,null,n().createElement("div",{className:"cfd-trade-modal__download-center-app--windows"},n().createElement(o.Icon,{icon:"IcWindowsLogo",size:32}),n().createElement(o.Text,{className:"cfd-trade-modal__download-center-app--windows-item",size:"xs"},(0,i.localize)("cTrader Windows app")),n().createElement("a",{className:"dc-btn cfd-trade-modal__download-center-app--windows-link",type:"button",href:b.m6,target:"_blank",rel:"noopener noreferrer"},n().createElement(o.Text,{size:"xxs",weight:"bold",color:"prominent"},(0,i.localize)("Download")))),n().createElement("div",{className:"cfd-trade-modal__download-center-app--macos"},n().createElement(o.Icon,{icon:"IcMacosLogo",size:32}),n().createElement(o.Text,{className:"cfd-trade-modal__download-center-app--macos-item",size:"xs"},(0,i.localize)("cTrader MacOS app")),n().createElement("a",{className:"dc-btn cfd-trade-modal__download-center-app--macos-link",type:"button",href:b.aR,target:"_blank",rel:"noopener noreferrer"},n().createElement(o.Text,{size:"xxs",weight:"bold",color:"prominent"},(0,i.localize)("Download")))))),n().createElement("div",{className:"cfd-trade-modal__download-center-description"},function(){switch(g){case"dxtrade":return n().createElement(o.Text,{align:"center",as:"p",className:"cfd-trade-modal__download-center-text",size:T?"xxs":"xxxs",weight:"bold"},(0,i.localize)("Download Deriv X on your phone to trade with the Deriv X account"));case"ctrader":return n().createElement(o.Text,{align:"center",as:"p",className:"cfd-trade-modal__download-center-text",size:T?"xxs":"xxxs",weight:"bold"},(0,i.localize)("Download cTrader on your phone to trade with the Deriv cTrader account"));default:return""}}()),n().createElement("div",{className:"cfd-trade-modal__download-center-options"},n().createElement("div",{className:"cfd-trade-modal__download-center-options--mobile-links"},n().createElement("div",{className:"cfd-trade-modal__download-center-options--mobile-links--apple"},n().createElement("a",{href:(0,y.z6)(g,"ios"),target:"_blank",rel:"noopener noreferrer"},n().createElement(o.Icon,{icon:"IcInstallationApple",width:T?"130":"160",height:40}))),n().createElement("a",{href:(0,y.z6)(g,"android"),target:"_blank",rel:"noopener noreferrer"},n().createElement(o.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),g!==E.$_.CTRADER&&n().createElement("a",{href:(0,y.z6)(g,"huawei"),target:"_blank",rel:"noopener noreferrer"},n().createElement(o.Icon,{icon:"IcInstallationHuawei",width:135,height:40}))),T&&n().createElement("div",{className:"cfd-trade-modal__download-center-options--qrcode"},(0,y.CF)(g))))}));var T=a("@deriv/account/src/Configs/get-mt5-status-badge-config"),N=a.n(T),k=a("./src/Assets/svgs/trading-platform/index.tsx"),z=a("@deriv-com/analytics"),D=a("./src/Assets/banner/migrate-card.svg"),I=a("./src/Assets/banner/migrate-card-dark.svg"),S={migrate_card:D.A,migrate_card_dark:I.A};const C=function(e){var t=e.image,a=S[t];return n().createElement(a,{className:"mt5-migration-banner__image","data-testid":"dt_".concat(t)})};const A=(0,l.observer)((function(e){var t=e.is_trade_modal,a=void 0!==t&&t,r=(0,l.useStore)().ui,s=r.is_dark_mode_on,m=r.toggleMT5MigrationModal,_=r.is_mobile,f=(0,d.E)(),v=f.setMT5MigrationError,h=f.is_mt5_trade_modal_visible,g=f.toggleMT5TradeModal,E=(0,c.useMT5SVGEligibleToMigrate)(),x=E.has_derived_mt5_to_migrate,y=E.has_derived_and_financial_mt5,b=a&&!_,w=s?"migrate_card_dark":"migrate_card";return n().createElement("div",{className:p()("mt5-migration-banner",{"mt5-migration-banner__trade-modal":a})},n().createElement("div",{className:p()("mt5-migration-banner__description",{"mt5-migration-banner__description--trade-modal":b})},n().createElement("div",{className:"mt5-migration-banner__description-text"},y?n().createElement(o.Text,{size:"xs"},n().createElement(i.Localize,{i18n_default_text:"Upgrade your <0>{{account_1}}</0> <1/>and <0>{{account_2}} {{platform}} </0> account(s)",values:{account_1:(0,u.getFormattedJurisdictionMarketTypes)(u.JURISDICTION_MARKET_TYPES.DERIVED),account_2:(0,u.getFormattedJurisdictionMarketTypes)(u.JURISDICTION_MARKET_TYPES.FINANCIAL),platform:(0,u.getCFDPlatformNames)(u.CFD_PLATFORMS.MT5)},components:[n().createElement("strong",{key:0}),b?null:n().createElement("br",{key:1})]})):n().createElement(o.Text,{size:"xs"},n().createElement(i.Localize,{i18n_default_text:"Upgrade your <0/><1>{{account_title}} {{platform}} </1> account(s)",values:{account_title:(0,u.getFormattedJurisdictionMarketTypes)(x?u.JURISDICTION_MARKET_TYPES.DERIVED:u.JURISDICTION_MARKET_TYPES.FINANCIAL),platform:(0,u.getCFDPlatformNames)(u.CFD_PLATFORMS.MT5)},components:[b?null:n().createElement("br",{key:0}),n().createElement("strong",{key:1})]}))),n().createElement(o.Button,{primary_light:!0,onClick:function(){h&&g(),v(""),z.Analytics.trackEvent("ce_upgrade_mt5_banner",{action:"push_cta_upgrade"}),m(!0)}},n().createElement(i.Localize,{i18n_default_text:"Upgrade"}))),n().createElement(C,{image:w}))}));const M=function(e){var t=e.account_title,a=e.mt5_trade_account,c=(0,b.Je)({mt5_trade_account:a}),l=(0,b.NK)({mt5_trade_account:a});return n().createElement(r.Fragment,null,n().createElement("div",{className:"cfd-trade-modal__download-center-app"},c.map((function(e){return n().createElement("div",{key:e.icon,className:"cfd-trade-modal__download-center-app--option"},n().createElement(o.Icon,{icon:e.icon,size:32}),n().createElement(o.Text,{className:"cfd-trade-modal__download-center-app--option-item",size:"xs"},e.text),n().createElement("a",{className:"cfd-trade-modal__download-center-app--option-link",type:"button",href:e.href,target:"_blank",rel:"noopener noreferrer"},n().createElement(o.Text,{size:"xxs",weight:"bold",color:"prominent"},e.button_text)))}))),n().createElement(o.Text,{align:"center",as:"div",className:"cfd-trade-modal__download-center-text",size:"xxs",weight:"bold"},(0,i.localize)("Download {{ platform }} on your phone to trade with the {{ platform }} {{ account }} account",{platform:(0,u.getCFDPlatformLabel)(u.CFD_PLATFORMS.MT5),account:t})),n().createElement("div",{className:"cfd-trade-modal__download-center-options"},n().createElement("div",{className:"cfd-trade-modal__download-center-options--mobile-links"},l.map((function(e){var t=e.href,a=e.icon;return n().createElement("a",{key:a,href:t,target:"_blank",rel:"noopener noreferrer"},n().createElement(o.Icon,{icon:a,width:135,height:40}))}))),n().createElement("div",{className:"cfd-trade-modal__download-center-options--qrcode"},n().createElement("img",{alt:"mt5 download qr",src:(0,u.getUrlBase)("/public/images/common/mt5_download.png"),width:80,height:80}),n().createElement(o.Text,{align:"center",size:"xxs"},(0,i.localize)("Scan the QR code to download {{ platform }}.",{platform:(0,u.getPlatformSettings)(u.CFD_PLATFORMS.MT5).name})))))};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function R(){R=function(){return t};var e,t={},a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,a){return e[t]=a}}function d(e,t,a,r){var o=t&&t.prototype instanceof h?t:h,c=Object.create(o.prototype),l=new S(r||[]);return n(c,"_invoke",{value:k(e,a,l)}),c}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",_="suspendedYield",p="executing",f="completed",v={};function h(){}function g(){}function E(){}var x={};s(x,c,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(C([])));b&&b!==a&&r.call(b,c)&&(x=b);var w=E.prototype=h.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function a(n,o,c,l){var i=m(e[n],e,o);if("throw"!==i.type){var s=i.arg,d=s.value;return d&&"object"==L(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,c,l)}),(function(e){a("throw",e,c,l)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return a("throw",e,c,l)}))}l(i.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function k(t,a,r){var n=u;return function(o,c){if(n===p)throw Error("Generator is already running");if(n===f){if("throw"===o)throw c;return{value:e,done:!0}}for(r.method=o,r.arg=c;;){var l=r.delegate;if(l){var i=z(l,r);if(i){if(i===v)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var s=m(t,a,r);if("normal"===s.type){if(n=r.done?f:_,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=f,r.method="throw",r.arg=s.arg)}}}function z(t,a){var r=a.method,n=t.iterator[r];if(n===e)return a.delegate=null,"throw"===r&&t.iterator.return&&(a.method="return",a.arg=e,z(t,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=m(n,t.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,v;var c=o.arg;return c?c.done?(a[t.resultName]=c.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,v):c:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,v)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function C(t){if(t||""===t){var a=t[c];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function a(){for(;++n<t.length;)if(r.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=e,a.done=!0,a};return o.next=o}}throw new TypeError(L(t)+" is not iterable")}return g.prototype=E,n(w,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:g,configurable:!0}),g.displayName=s(E,i,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,s(e,i,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},T(N.prototype),s(N.prototype,l,(function(){return this})),t.AsyncIterator=N,t.async=function(e,a,r,n,o){void 0===o&&(o=Promise);var c=new N(d(e,a,r,n),o);return t.isGeneratorFunction(a)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},T(w),s(w,i,"Generator"),s(w,c,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(r,n){return l.type="throw",l.arg=t,a.next=r,n&&(a.method="next",a.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],l=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var i=r.call(c,"catchLoc"),s=r.call(c,"finallyLoc");if(i&&s){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),I(a),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;I(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,a,r){return this.delegate={iterator:C(t),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function O(e,t,a,r,n,o,c){try{var l=e[o](c),i=l.value}catch(e){return void a(e)}l.done?t(i):Promise.resolve(i).then(r,n)}const P=function(e){var t=e.mt5_trade_account,a=function(){var e,a=(e=R().mark((function e(){var a,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.location.replace((0,b.uL)({mt5_trade_account:t})),e.next=3,(0,b.h2)({mt5_trade_account:t});case 3:a=e.sent,r=setTimeout((function(){a&&window.location.replace(a)}),4e3),document.addEventListener("visibilitychange",(function(){document.hidden&&clearTimeout(r),window.onblur&&(clearTimeout(r),document.hidden||a&&window.location.replace(a))}));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function c(e){O(o,r,n,c,l,"next",e)}function l(e){O(o,r,n,c,l,"throw",e)}c(void 0)}))});return function(){return a.apply(this,arguments)}}();return n().createElement("div",{className:"mt5-download-container"},n().createElement("a",{className:"mt5-download-container--option",href:(0,b.u)({mt5_trade_account:t}),target:"_blank",rel:"noopener noreferrer"},n().createElement("div",{className:"full-row"},n().createElement(o.Icon,{icon:"IcDesktopOutline",size:16}),n().createElement(o.Text,{align:"left",size:"xxs",weight:"bold",className:"title"},n().createElement(i.Localize,{i18n_default_text:"MetaTrader5 web terminal"})),n().createElement(o.Icon,{icon:"IcChevronRight",size:16}))),n().createElement("button",{className:"mt5-download-container--option blue",onClick:a},n().createElement("div",{className:"full-row"},n().createElement(o.Icon,{icon:"IcMobileOutline",size:16}),n().createElement(o.Text,{align:"left",size:"xxs",weight:"bold",className:"title"},n().createElement(i.Localize,{i18n_default_text:"Trade with MT5 mobile app"})),n().createElement(o.Icon,{icon:"IcChevronRightLight",size:16}))),n().createElement(o.Text,{as:"p",size:"xxxxs"},n().createElement(i.Localize,{i18n_default_text:"Note: Don't have the MT5 app? Tap the <0>Trade with MT5 mobile app</0> button to download. Once you have installed the app, return to this screen and hit the same button to log in.",components:[n().createElement("strong",{key:0})]})))};var F=a("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneChartAreaRegularIcon.js"),U=a("../../node_modules/@deriv/quill-icons/dist/esm/react/Standalone/StandaloneArrowUpRightRegularIcon.js");const j=(0,l.observer)((function(e){var t,a=e.mt5_trade_account,r=e.show_eu_related_content,c=e.onPasswordManager,d=e.toggleModal,m=e.product,_=e.is_demo,p=(0,s.Y)().isDesktop,f=(0,l.useStore)().client.account_status,h=((void 0===f?{}:f).authentication,a.eligible_to_migrate),g=function(){switch(a.product){case u.PRODUCT.STANDARD:return"Standard";case u.PRODUCT.SWAPFREE:return"Swap-Free";case u.PRODUCT.ZEROSPREAD:return"Zero Spread";case u.PRODUCT.STP:return"Financial STP";case u.PRODUCT.GOLD:return"Gold";default:return r?"CFDs":"Financial"}},y=N()(null==a?void 0:a.status),b=y.text,w=y.icon,T=[u.MT5_ACCOUNT_STATUS.MIGRATED_WITH_POSITION,u.MT5_ACCOUNT_STATUS.MIGRATED_WITHOUT_POSITION].includes(null==a?void 0:a.status),z=function(){switch(a.landing_company_short){case u.Jurisdiction.SVG:return"SVG";case u.Jurisdiction.BVI:return"BVI";case u.Jurisdiction.VANUATU:return"Vanuatu";case u.Jurisdiction.MAURITIUS:return"DML";default:return null}},D="windows"===(0,u.OSDetect)();return n().createElement("div",{className:"cfd-trade-modal-container"},n().createElement("div",{className:"cfd-trade-modal"},n().createElement(k.A,{icon:r&&m===u.PRODUCT.FINANCIAL?"CFDs":a.market_type===E.KV.SYNTHETIC?"Standard":a.market_type===E.KV.ALL&&m===u.PRODUCT.SWAPFREE?"SwapFree":a.market_type===E.KV.ALL&&m===u.PRODUCT.ZEROSPREAD?"ZeroSpread":a.market_type===E.KV.FINANCIAL&&m===u.PRODUCT.GOLD?"Gold":"Financial",size:24}),n().createElement("div",{className:"cfd-trade-modal__desc"},n().createElement("div",{className:"cfd-trade-modal__desc-heading"},n().createElement(o.Text,{size:"xs",line_height:"l"},g()),_?n().createElement(o.Text,{size:"xxs",line_height:"l",weight:"bold",className:"cfd-trade-modal__desc-heading--demo"},(0,i.localize)("Demo")):z()&&n().createElement(o.Text,{size:"xxs",line_height:"l",className:"cfd-trade-modal__desc-heading--real"},z())),(null==a?void 0:a.display_login)&&n().createElement(o.Text,{color:"less-prominent",size:"xxxs",line_height:"xxxs"},null==a?void 0:a.display_login)),n().createElement("div",{className:"cfd-trade-modal__acc_status"},(null==a?void 0:a.display_balance)&&n().createElement(o.Text,{size:"xs",color:"profit-success",className:"cfd-trade-modal__desc-balance",weight:"bold"},n().createElement(o.Money,{amount:a.display_balance,currency:a.currency,has_sign:!!a.balance&&a.balance<0,show_currency:!0})),T&&n().createElement(o.StatusBadge,{className:"trading-app-card__acc_status_badge",account_status:a.status,icon:w,text:b}))),n().createElement("div",{className:"cfd-trade-modal__login-specs"},n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(o.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Broker")),n().createElement(v,{is_bold:!0,is_broker:!0,value:null==a?void 0:a.landing_company})),n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(o.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Server")),n().createElement(v,{is_bold:!0,value:null==a||null===(t=a.server_info)||void 0===t?void 0:t.environment})),n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(o.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Login ID")),n().createElement(v,{is_bold:!0,value:null==a?void 0:a.display_login})),n().createElement("div",{className:"cfd-trade-modal__login-specs-item"},n().createElement(o.Text,{className:"cfd-trade-modal--paragraph"},(0,i.localize)("Password")),n().createElement("div",{className:"cfd-trade-modal--paragraph"},n().createElement(x,{platform:"mt5",onClick:function(){var e,t,n=(0,u.getCFDAccountKey)({market_type:a.market_type,sub_account_type:a.sub_account_type,platform:E.$_.MT5,shortcode:a.landing_company_short,product:m});c(null==a?void 0:a.login,function(e,t){return t&&(0,i.localize)("MT5 CFDs"),e}(null!==(e=a.market_type)&&void 0!==e?e:"",r),null!==(t=a.account_type)&&void 0!==t?t:"",n,null==a?void 0:a.server),d()}}))),n().createElement("div",{className:"cfd-trade-modal__maintenance"},n().createElement(o.Icon,{icon:"IcAlertWarning",size:p?20:28,className:"cfd-trade-modal__maintenance-icon"}),n().createElement("div",{className:"cfd-trade-modal__maintenance-text"},n().createElement(i.Localize,{i18n_default_text:"Server maintenance starts at 01:00 GMT every Sunday, and this process may take up to 2 hours to complete. Service may be disrupted during this time."}))),p&&D&&a.product!==u.PRODUCT.GOLD&&n().createElement(o.InformationBanner,{information_icon:n().createElement(F.A,{fill:"#095A66",iconSize:"sm"}),title:n().createElement(i.Localize,{i18n_default_text:"Alpha Generation guide"}),description:n().createElement(i.Localize,{i18n_default_text:"Tailor your indicators with expert-driven trend analysis."}),redirect_icon:n().createElement(U.A,{fill:"#000000",iconSize:"sm"}),link:"https://docs.deriv.com/misc/alpha_generation_guide.pdf"})),h&&n().createElement(A,{is_trade_modal:!0}),p?n().createElement(M,{account_title:g(),mt5_trade_account:a}):n().createElement(P,{mt5_trade_account:a}))}));const G=(0,l.observer)((function(e){var t=e.is_eu_user,a=e.is_open,r=e.onPasswordManager,m=e.toggleModal,u=e.is_demo,_=(0,s.Y)().isDesktop,p=(0,l.useStore)(),f=p.traders_hub,v=p.common,h=p.modules.cfd.is_nakala_banner_visible,E=f.show_eu_related_content,x=f.combined_cfd_mt5_accounts,y=v.platform,b=(0,d.E)(),T=b.mt5_trade_account,N=b.dxtrade_tokens,k=b.ctrader_tokens,z=b.product,D=x.filter((function(e){return"standard"===e.product&&"get"!==e.action_type})),I=(0,c.useIsEnabledNakala)(D),S=I.nakalaServerInfo,C=I.loginId,A=function(){return"mt5"===y?n().createElement(j,{mt5_trade_account:T,show_eu_related_content:E,onPasswordManager:r,toggleModal:m,product:z,is_demo:u}):n().createElement(w,{ctrader_derivx_trade_account:T,is_eu_user:t,onPasswordManager:r,toggleModal:m,is_demo:u,platform:y,ctrader_tokens:k,dxtrade_tokens:N,is_mobile:!_})};return n().createElement(n().Suspense,{fallback:n().createElement(o.UILoader,null)},_?n().createElement(o.Modal,{is_open:a,title:h?(0,i.localize)("Deriv Nakala"):(0,i.localize)("Trade"),toggleModal:m,should_header_stick_body:!1,width:h?"485px":"600px",exit_classname:"cfd-modal--custom-exit"},h?n().createElement(g,{nakalaInfo:{loginId:C,serverName:S}}):n().createElement(A,null)):n().createElement(o.PageOverlay,{is_open:a,portal_id:"deriv_app",header:h?"Deriv Nakala":"Trade",onClickClose:m,header_classname:"cfd-trade-modal__mobile-title"},n().createElement(o.Div100vhContainer,{className:"cfd-trade-modal__mobile-view-wrapper",height_offset:"80px"},h?n().createElement(g,{nakalaInfo:{loginId:C,serverName:S}}):n().createElement(A,null))))}))},"@deriv-com/analytics":t=>{t.exports=e},"@deriv/account/src/Configs/get-mt5-status-badge-config":e=>{e.exports=t},"@deriv/components":e=>{e.exports=a},"@deriv/hooks":e=>{e.exports=r},"@deriv/shared":e=>{e.exports=n},"@deriv/stores":e=>{e.exports=o},"@deriv/translations":e=>{e.exports=c},classnames:e=>{e.exports=l},react:e=>{e.exports=i}},m={};function u(e){var t=m[e];if(void 0!==t)return t.exports;var a=m[e]={exports:{}};return d[e](a,a.exports,u),a.exports}u.m=d,s=[],u.O=(e,t,a,r)=>{if(!t){var n=1/0;for(i=0;i<s.length;i++){for(var[t,a,r]=s[i],o=!0,c=0;c<t.length;c++)(!1&r||n>=r)&&Object.keys(u.O).every((e=>u.O[e](t[c])))?t.splice(c--,1):(o=!1,r<n&&(n=r));if(o){s.splice(i--,1);var l=a();void 0!==l&&(e=l)}}return e}r=r||0;for(var i=s.length;i>0&&s[i-1][2]>r;i--)s[i]=s[i-1];s[i]=[t,a,r]},u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var a in t)u.o(t,a)&&!u.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},u.e=()=>Promise.resolve(),u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.j="MT5TradeModal",(()=>{var e={MT5TradeModal:0};u.O.j=t=>0===e[t];var t=(t,a)=>{var r,n,[o,c,l]=a,i=0;if(o.some((t=>0!==e[t]))){for(r in c)u.o(c,r)&&(u.m[r]=c[r]);if(l)var s=l(u)}for(t&&t(a);i<o.length;i++)n=o[i],u.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return u.O(s)},a=self.webpackChunk_deriv_cfd=self.webpackChunk_deriv_cfd||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var _=u.O(void 0,["internalCFDStoreUsage","utilities","assets","vendors-node_modules_deriv_quill-icons_dist_esm_react_Standalone_StandaloneArrowUpRightRegula-32bd46"],(()=>u("./src/Containers/mt5-trade-modal.tsx")));return _=(_=u.O(_)).default})()));
//# sourceMappingURL=MT5TradeModal.js.map