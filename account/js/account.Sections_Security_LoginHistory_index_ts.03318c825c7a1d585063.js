"use strict";(self.webpackChunk_deriv_account=self.webpackChunk_deriv_account||[]).push([["Sections_Security_LoginHistory_index_ts"],{"./Sections/Security/LoginHistory/index.ts":(e,s,t)=>{t.r(s),t.d(s,{default:()=>T});var l=t("react"),i=t.n(l),a=t("@deriv/components"),o=t("@deriv/stores"),_=t("@deriv/shared"),r=t("../../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js"),n=t("./Components/load-error-message/index.ts"),c=t("@deriv-com/translations"),d=t("../../../node_modules/react/jsx-runtime.js");const x=()=>({date_title:(0,d.jsx)(c.Localize,{i18n_default_text:"Date and time"}),action_title:(0,d.jsx)(c.Localize,{i18n_default_text:"Action"}),browser_title:(0,d.jsx)(c.Localize,{i18n_default_text:"Browser"}),ip_title:(0,d.jsx)(c.Localize,{i18n_default_text:"IP address"}),status_title:(0,d.jsx)(c.Localize,{i18n_default_text:"Status"})}),h=({id:e,date:s,action:t,browser:l,ip:i,status:o})=>(0,d.jsxs)(a.Table.Row,{className:"login-history__table__row",children:[(0,d.jsx)(a.Table.Cell,{children:(0,d.jsx)(a.Text,{line_height:"xs",size:"xs",children:s})}),(0,d.jsx)(a.Table.Cell,{className:"login-history__table__row__cell login-history__table__row__cell--action",children:(0,d.jsx)(c.Localize,{i18n_default_text:"{{action}}",values:{action:t}})}),(0,d.jsx)(a.Table.Cell,{children:"Unknown"===l?(0,d.jsx)(c.Localize,{i18n_default_text:"Unknown"}):l}),(0,d.jsx)(a.Table.Cell,{children:i}),(0,d.jsx)(a.Table.Cell,{children:(0,d.jsx)(c.Localize,{i18n_default_text:"{{status}}",values:{status:o}})})]},e);var u=t("../../../node_modules/clsx/dist/clsx.mjs");const j=({title:e,text:s,className:t,align:i="left"})=>(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(a.Text,{as:"h3",align:i,weight:"bold",className:"login-history__list__row__cell--title",children:e}),(0,d.jsx)(a.Text,{className:(0,u.A)(t,{"login-history__list__row__cell--right":"right"===i}),line_height:"xs",size:"xs",align:i,children:s})]}),g=({id:e,date:s,action:t,browser:l,ip:i,status:o})=>{const{date_title:_,browser_title:n,action_title:h,ip_title:g,status_title:m}=x(),{isDesktop:w}=(0,r.Y)();return(0,d.jsxs)("div",{className:(0,u.A)("login-history__list__wrapper"),children:[(0,d.jsx)(a.Table.Row,{className:"login-history__list__row login-history__list__row--with-margin",children:(0,d.jsx)(a.Table.Cell,{className:"login-history__list__row__cell",children:(0,d.jsx)(j,{title:_,text:s})})}),(0,d.jsxs)(a.Table.Row,{className:"login-history__list__row login-history__list__row--with-margin",children:[(0,d.jsx)(a.Table.Cell,{className:"login-history__list__row__cell",children:(0,d.jsx)(j,{className:"login-history__list__row__cell--browser",title:n,text:"Unknown"===l?(0,d.jsx)(c.Localize,{i18n_default_text:"Unknown"}):l})}),(0,d.jsx)(a.Table.Cell,{className:"login-history__list__row__cell",children:(0,d.jsx)(j,{className:"login-history__list__row__cell--action",title:h,text:(0,d.jsx)(c.Localize,{i18n_default_text:"{{action}}",values:{action:t}})})})]}),(0,d.jsxs)(a.Table.Row,{className:"login-history__list__row",children:[(0,d.jsx)(a.Table.Cell,{className:"login-history__list__row__cell",children:(0,d.jsx)(j,{className:"login-history__list__row__cell--ip-value",title:g,text:i})}),w&&(0,d.jsx)(a.Table.Cell,{className:"login-history__list__row__cell",children:(0,d.jsx)(j,{title:m,text:(0,d.jsx)(c.Localize,{i18n_default_text:"{{status}}",values:{status:o}})})})]})]},e)},m=(e,s)=>(0,d.jsxs)(a.Table,{fixed:!0,className:"login-history__table",children:[(0,d.jsx)(a.Table.Header,{children:(0,d.jsx)(a.Table.Row,{className:"login-history__table__header",children:Object.entries(e).map((([e,s])=>(0,d.jsx)(a.Table.Head,{children:s},e)))})}),(0,d.jsx)(a.Table.Body,{children:s.map((e=>(0,d.jsx)(h,{...e},e.id)))})]}),w=e=>(0,d.jsx)(a.Table,{className:"login-history__list",children:(0,d.jsx)(a.Table.Body,{children:e.map((e=>(0,d.jsx)(g,{...e},e.id)))})}),b=({data:e})=>{const{isDesktop:s}=(0,r.Y)();return s?m(x(),e):w(e)};var y=t("@deriv/utils");const T=(0,o.observer)((()=>{const{client:e}=(0,o.useStore)(),{isDesktop:s}=(0,r.Y)(),{is_switching:t}=e,[l,c]=i().useState(!0),[x,h]=i().useState(""),[u,j]=i().useState([]),g=(0,_.useIsMounted)();return i().useEffect((()=>{(async()=>{if(g()){const e=await _.WS.authorized.fetchLoginHistory(50);if(c(!1),e.error)h(e.error.message);else{const s=(0,y.getLoginHistoryFormattedData)(e.login_history);j(s)}}})()}),[]),t?(0,d.jsx)(a.Loading,{}):l?(0,d.jsx)(a.Loading,{is_fullscreen:!1,className:"account__initial-loader"}):x?(0,d.jsx)(n.A,{error_message:x}):(0,d.jsx)(a.ThemedScrollbars,{is_bypassed:!s,className:"login-history",children:u.length>0?(0,d.jsx)(b,{data:u}):null})}))}}]);
//# sourceMappingURL=account.Sections_Security_LoginHistory_index_ts.03318c825c7a1d585063.js.map