"use strict";(self.webpackChunk_deriv_account=self.webpackChunk_deriv_account||[]).push([["Sections_Security_SelfExclusion_index_ts"],{"./Components/article/index.ts":(e,s,t)=>{t.d(s,{A:()=>r});var i=t("react"),a=t("@deriv/components"),l=t("@deriv-com/translations"),n=t("../../../node_modules/clsx/dist/clsx.mjs"),o=t("../../../node_modules/react/jsx-runtime.js");const r=({title:e,descriptions:s,onClickLearnMore:t,className:r})=>{const c=s?.length>0,d=1===s?.length;return(0,o.jsxs)("article",{className:(0,n.A)("da-article",r),children:[(0,o.jsx)(a.Text,{as:"h4",color:"prominent",line_height:"m",size:"xs",weight:"bold",className:"da-article__header",children:e}),c&&(0,o.jsx)(i.Fragment,{children:d?(0,o.jsx)(a.Text,{as:"p",size:"xxs",line_height:"m",children:s[0]}):(0,o.jsx)("ul",{className:"da-article__list",children:s.map(((e,s)=>(0,o.jsx)("li",{children:(0,o.jsx)(a.Text,{size:"xxs",line_height:"xs",children:e})},s)))})}),t&&(0,o.jsxs)("div",{className:"da-article__learn-more",onClick:t,children:[(0,o.jsx)(a.Text,{size:"xxs",color:"loss-danger",line_height:"s",children:(0,o.jsx)(l.Localize,{i18n_default_text:"Learn more"})}),(0,o.jsx)(a.Icon,{icon:"IcChevronRight",className:"da-article__learn-more-icon",color:"red"})]})]})}},"./Sections/Security/SelfExclusion/index.ts":(e,s,t)=>{t.r(s),t.d(s,{default:()=>B});var i=t("react"),a=t.n(i),l=t("@deriv/components"),n=t("@deriv/shared"),o=t("@deriv-com/translations"),r=t("./Components/demo-message/index.ts"),c=t("./Components/load-error-message/index.ts"),d=t("../../../node_modules/clsx/dist/clsx.mjs"),_=t("@deriv/utils"),u=t("@deriv-com/utils");const m=(0,i.createContext)({overlay_ref:document.createElement("div"),currency:"",handleSubmit:()=>null});var x=t("../../../node_modules/react/jsx-runtime.js");const f=({is_in_overlay:e})=>{const{is_app_settings:s,toggleArticle:t,overlay_ref:a,is_eu:n}=(0,i.useContext)(m),{localize:r}=(0,o.useTranslations)(),c=(({is_eu:e,is_app_settings:s})=>(e?(()=>{const e=[{component:(0,x.jsx)(o.Localize,{i18n_default_text:"We’ve introduced these limits to encourage <0>responsible trading</0>. They are optional, and you can adjust them anytime.",components:[(0,x.jsx)("a",{className:"link",rel:"noopener noreferrer",target:"_blank",href:u.URLUtils.getDerivStaticURL("/responsible")},0)]})},{component:(0,x.jsx)(o.Localize,{i18n_default_text:"You decide how much and how long to trade. You can take a break from trading whenever you want. This break can be from 6 weeks to 5 years. When it’s over, you can extend it or resume trading after a 24-hour cooling-off period. If you don’t want to set a specific limit, leave the field empty."})},{component:(0,x.jsx)(o.Localize,{i18n_default_text:"These limits apply to your multipliers trades only. For example, <0>maximum total loss</0> refers to the losses on your multipliers trades.",components:[(0,x.jsx)("strong",{},0)]})}];return s||e.push({component:(0,x.jsx)(o.Localize,{i18n_default_text:"If you want to adjust your limits, <0>contact us via live chat</0>. We’ll make the adjustments within 24 hours.",components:[(0,x.jsx)("span",{className:"link link--orange",onClick:_.Chat.open},0)]})}),e})():[{component:(0,x.jsx)(o.Localize,{i18n_default_text:"We’ve introduced these limits to encourage <0>responsible trading</0>. They are optional, and you can adjust them anytime.",components:[(0,x.jsx)("a",{className:"link",rel:"noopener noreferrer",target:"_blank",href:u.URLUtils.getDerivStaticURL("/responsible")},0)]})},{component:(0,x.jsx)(o.Localize,{i18n_default_text:"You decide how much and how long to trade. You can take a break from trading whenever you want. This break can be from 6 weeks to 5 years. When it’s over, you can extend it or log in to resume trading. If you don’t want to set a specific limit, leave the field empty."})},{component:(0,x.jsx)(o.Localize,{i18n_default_text:"These limits apply to your options trades only. For example, <0>maximum total loss</0> refers to the losses on all your trades on options trading platforms.",components:[(0,x.jsx)("strong",{},0)]})},...s?[]:[{component:(0,x.jsx)(o.Localize,{i18n_default_text:"If you want to adjust your self-exclusion limits, <0>contact us via live chat.</0>",components:[(0,x.jsx)("span",{className:"link link--orange",onClick:_.Chat.open},0)]})}]]).map(((e,s)=>({...e,key:`self_exclusion_desc_${s}`}))))({is_eu:n,is_app_settings:s});return e?(0,x.jsx)(l.Popup.Overlay,{descriptions:c,done_text:r("Done"),overlay_ref:a,title:r("Trading limits"),toggleOverlay:t}):(0,x.jsxs)("div",{className:(0,d.A)("da-self-exclusion-article__content",{"da-self-exclusion-article__content--is-in-modal":!e}),children:[(0,x.jsxs)("div",{className:"da-self-exclusion-article__content-header-container",children:[(0,x.jsx)(l.Text,{as:"h3",color:"prominent",size:"s",line_height:"l",weight:"bold",className:"da-self-exclusion-article__content-header",children:(0,x.jsx)(o.Localize,{i18n_default_text:"About trading limits and self-exclusion"})}),(0,x.jsx)(l.Icon,{icon:"IcCross",className:"da-self-exclusion-article__content-icon",onClick:t})]}),(0,x.jsx)("ul",{className:"da-self-exclusion-article__content-list",children:c.map((e=>(0,x.jsx)("li",{children:(0,x.jsx)(l.Text,{as:"span",size:"xxs",children:e.component})},e.key)))}),s&&(0,x.jsx)("div",{className:"da-self-exclusion-article__content-button",children:(0,x.jsx)(l.Button,{secondary:!0,large:!0,onClick:t,children:(0,x.jsx)(o.Localize,{i18n_default_text:"Done"})})})]})},h=()=>{const{state:e,toggleArticle:s}=(0,i.useContext)(m);return(0,x.jsx)(l.Modal,{className:"self_exclusion__article-modal",is_open:e?.show_article,toggleModal:s,children:(0,x.jsx)(l.ThemedScrollbars,{children:(0,x.jsx)(f,{})})})};var p=t("@deriv/translations"),g=t("./Components/article/index.ts"),j=t("@deriv/stores");const y=(0,j.observer)((()=>{const{toggleArticle:e,is_eu:s}=a().useContext(m);return(0,x.jsx)(g.A,{title:(0,p.localize)("Trading limits and self-exclusion"),descriptions:[s?(0,x.jsx)(p.Localize,{i18n_default_text:"These trading limits and self-exclusion help you control the amount of money and time you spend on {{brand_website_name}} and exercise <0>responsible trading</0>.",components:[(0,x.jsx)(l.StaticUrl,{className:"link",href:"/responsible"},0)],values:{brand_website_name:(0,n.getBrandWebsiteName)()}}):(0,x.jsx)(p.Localize,{i18n_default_text:"These self-exclusion limits help you control the amount of money and time you spend trading on {{platform_name_trader}}, {{platform_name_dbot}} and {{platform_name_smarttrader}} on Deriv. The limits you set here will help you exercise <0>responsible trading</0>.",components:[(0,x.jsx)(l.StaticUrl,{className:"link",href:"/responsible"},0)],values:{platform_name_trader:(0,n.getPlatformSettings)("trader").name,platform_name_dbot:(0,n.getPlatformSettings)("dbot").name,platform_name_smarttrader:(0,n.getPlatformSettings)("smarttrader").name}})],onClickLearnMore:e})}));var b=t("../../../node_modules/@deriv-com/ui/dist/hooks/useDevice.js");const v=({children:e})=>{const{is_app_settings:s,is_wrapper_bypassed:t,state:a,is_mf:n}=(0,i.useContext)(m),{isDesktop:r}=(0,b.Y)(),c=n&&Object.values(a?.self_exclusions||{}).some((e=>e));return t?(0,x.jsxs)("section",{role:"section-self-exclusion-wrapper",className:(0,d.A)("da-self-exclusion",{"da-self-exclusion--app-settings":s}),children:[!r&&(0,x.jsx)(y,{}),e]}):(0,x.jsxs)(l.Div100vhContainer,{className:(0,d.A)("da-self-exclusion__wrapper",{"da-self-exclusion__wrapper--show-article":a?.show_article}),is_disabled:r,height_offset:"80px",children:[(0,x.jsxs)("div",{className:"da-self-exclusion__inner-wrap",children:[c&&(0,x.jsx)(l.InlineMessage,{type:"information",size:r?"sm":"md",className:"da-self-exclusion__banner",message:(0,x.jsx)(o.Localize,{i18n_default_text:"To increase or remove your limit, contact us via <0>live chat</0>.",components:[(0,x.jsx)("span",{className:"link link--prominent",onClick:_.Chat.open},0)]})}),(0,x.jsxs)(l.ThemedScrollbars,{className:"da-self-exclusion__scrollbars",is_bypassed:!r,children:[!r&&(0,x.jsx)(y,{}),e]})]}),r&&(0,x.jsx)(y,{})]})};var N=t("formik");const k=()=>{const{backToReview:e}=a().useContext(m),{handleSubmit:s,isSubmitting:t}=(0,N.useFormikContext)();return(0,x.jsxs)("div",{className:"da-self-exclusion__confirm-limits",children:[(0,x.jsx)(l.Icon,{icon:"IcStop",className:"da-self-exclusion__confirm-limits-image"}),(0,x.jsx)(l.Text,{as:"h4",align:"center",color:"prominent",className:"da-self-exclusion__confirm-limits-header",line_height:"l",size:"s",weight:"bold",children:(0,x.jsx)(p.Localize,{i18n_default_text:"Save new limits?"})}),(0,x.jsx)(l.Text,{as:"p",align:"center",color:"general",className:"da-self-exclusion__confirm-limits-desc",line_height:"m",size:"xs",children:(0,x.jsx)(p.Localize,{i18n_default_text:"Remember: You cannot log in to your account until the selected date."})}),(0,x.jsxs)("div",{className:"da-self-exclusion__confirm-limits-buttons",children:[(0,x.jsx)(l.Button,{type:"button",secondary:!0,large:!0,onClick:e,children:(0,x.jsx)(p.Localize,{i18n_default_text:"No, review my limits"})}),(0,x.jsx)(l.Button,{type:"submit",is_loading:t,is_disabled:t,primary:!0,large:!0,onClick:()=>s(),children:(0,x.jsx)(p.Localize,{i18n_default_text:"Yes, log me out immediately"})})]})]})},z=()=>{const{backFromConfirmLimits:e,currency:s,currency_display:t,exclusion_texts:a,is_eu:r,state:c}=(0,i.useContext)(m),{isSubmitting:d,values:f}=(0,N.useFormikContext)(),{localize:h}=(0,o.useTranslations)();return c?.show_confirm?(0,x.jsx)(k,{}):(0,x.jsxs)(i.Fragment,{children:[(0,x.jsxs)("div",{onClick:e,className:"da-self-exclusion__back",children:[(0,x.jsx)(l.Icon,{icon:"IcArrowLeftBold"}),(0,x.jsx)(l.Text,{as:"p",size:"xs",weight:"bold",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Back"})})]}),(0,x.jsxs)("div",{className:"da-self-exclusion__confirm",children:[(0,x.jsx)(l.Text,{className:"da-self-exclusion__confirm-header",as:"h2",size:"s",line_height:"l",weight:"bold",color:"prominent",children:(0,x.jsx)(o.Localize,{i18n_default_text:"You have set the following limits:"})}),c?.changed_attributes.map((e=>{let i="";["exclude_until","timeout_until"].includes(e)?i=(0,n.toMoment)(f[e]).format("DD/MM/YYYY"):["max_deposit","max_7day_deposit","max_30day_deposit","max_total_stake","max_turnover","max_losses","max_7day_turnover","max_7day_losses","max_30day_turnover","max_30day_losses","max_balance"].includes(e)?i=`${u.FormatUtils.formatMoney(+f[e],{currency:s})} ${t}`:["session_duration_limit"].includes(e)?i=h("{{value}} mins",{value:f[e]}):["max_open_bets"].includes(e)&&(i=`${f[e]}`);const o=0==+f[e]?"Removed":i;return(0,x.jsxs)("div",{className:"da-self-exclusion__confirm-item",children:[(0,x.jsx)(l.Text,{as:"p",size:"xs",children:a?a[e]:""}),(0,x.jsx)(l.Text,{as:"p",size:"xs",align:"right",weight:"bold",children:o})]},e)})),(0,x.jsx)(l.Text,{as:"p",size:"xs",align:"center",className:"da-self-exclusion__confirm-note",children:r?(0,x.jsx)(o.Localize,{i18n_default_text:"You’ll be able to adjust these limits at any time. You can reduce your limits from the <0>self-exclusion page</0>. To increase or remove your limits, please contact our <1>Customer Support team</1>.",components:[(0,x.jsx)(l.Text,{size:"xs",color:"loss-danger",weight:"bold"},0),(0,x.jsx)("span",{className:"link link--orange",onClick:_.Chat.open},1)]}):(0,x.jsx)(o.Localize,{i18n_default_text:"We’ll update your limits. Click <0>Accept</0> to acknowledge that you are fully responsible for your actions, and we are not liable for any addiction or loss.",components:[(0,x.jsx)(l.Text,{size:"xs",weight:"bold"},0)]})}),(0,x.jsx)(l.Text,{as:"p",size:"xs",align:"center",color:"loss-danger",className:"da-self-exclusion__error",children:c?.submit_error_message}),r?(0,x.jsx)(l.Button,{is_loading:d,is_disabled:d,primary:!0,large:!0,type:"submit",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Confirm my limits"})}):(0,x.jsx)(l.Button,{is_loading:d,is_disabled:d,primary:!0,large:!0,type:"submit",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Accept"})})]})]})};var w=t("react-dom");const L=()=>{const{footer_ref:e,goToConfirm:s,toggleArticle:t}=(0,i.useContext)(m),{dirty:a,isSubmitting:n,isValid:r,values:c}=(0,N.useFormikContext)();return e?(0,w.createPortal)((0,x.jsxs)(i.Fragment,{children:[(0,x.jsx)("a",{className:"link link--prominent",onClick:t,children:(0,x.jsx)(l.Text,{size:"xxs",line_height:"m",weight:"bold",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Learn more about trading limits"})})}),(0,x.jsx)(l.Button,{disabled:!a||!r||n,primary:!0,className:"da-self-exclusion__button",large:!0,onClick:()=>s?.(c),type:"button",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Next"})})]}),e):null},C=({title:e,has_border_line:s})=>{const{isDesktop:t}=(0,b.Y)();return(0,x.jsx)(l.Text,{as:"h2",weight:"bold",size:t?"xs":"xxs",className:(0,d.A)("da-self-exclusion__header",{"da-self-exclusion__header-border":s}),children:e})},T=()=>{const{currency_display:e,getMaxLength:s}=(0,i.useContext)(m),{errors:t,handleBlur:a,handleChange:n,values:r}=(0,N.useFormikContext)();return(0,x.jsxs)(i.Fragment,{children:[(0,x.jsx)(C,{title:(0,x.jsx)(o.Localize,{i18n_default_text:"Your stake and loss limits"})}),(0,x.jsxs)("div",{className:"da-self-exclusion__item-wrapper",children:[(0,x.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,x.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,x.jsx)(o.Localize,{i18n_default_text:"24 hours"})}),(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Max. total stake"})}),(0,x.jsx)(N.Field,{name:"max_turnover","data-testid":"dt_max_turnover",children:({field:i})=>(0,x.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_turnover??"",onChange:n,onBlur:a,maxLength:s?.("max_turnover"),required:!0,error:t.max_turnover})}),(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Max. total loss"})}),(0,x.jsx)(N.Field,{name:"max_losses",children:({field:i})=>(0,x.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_losses,onChange:n,onBlur:a,maxLength:s?.("max_losses"),required:!0,error:t.max_losses})})]}),(0,x.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,x.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,x.jsx)(o.Localize,{i18n_default_text:"7 days"})}),(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Max. total stake"})}),(0,x.jsx)(N.Field,{name:"max_7day_turnover",children:({field:i})=>(0,x.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_7day_turnover,onChange:n,onBlur:a,maxLength:s?.("max_7day_turnover"),required:!0,error:t.max_7day_turnover})}),(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Max. total loss"})}),(0,x.jsx)(N.Field,{name:"max_7day_losses",children:({field:i})=>(0,x.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_7day_losses,onChange:n,onBlur:a,maxLength:s?.("max_7day_losses"),required:!0,error:t.max_7day_losses})})]}),(0,x.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,x.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,x.jsx)(o.Localize,{i18n_default_text:"30 days"})}),(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Max. total stake"})}),(0,x.jsx)(N.Field,{name:"max_30day_turnover",children:({field:i})=>(0,x.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,onChange:n,onBlur:a,maxLength:s?.("max_30day_turnover"),required:!0,error:t.max_30day_turnover})}),(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Max. total loss"})}),(0,x.jsx)(N.Field,{name:"max_30day_losses",children:({field:i})=>(0,x.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_30day_losses,onChange:n,onBlur:a,maxLength:s?.("max_30day_losses"),required:!0,error:t.max_30day_losses})})]})]})]})},M=()=>{const{is_tablet:e,session_duration_digits:s}=(0,i.useContext)(m),{errors:t,handleBlur:a,handleChange:r,setFieldValue:c,values:d}=(0,N.useFormikContext)(),{localize:_}=(0,o.useTranslations)();return(0,x.jsxs)(i.Fragment,{children:[(0,x.jsx)(C,{title:(0,x.jsx)(o.Localize,{i18n_default_text:"Your session and login limits"})}),(0,x.jsxs)("div",{className:"da-self-exclusion__item-wrapper",children:[(0,x.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"You will be automatically logged out from each session after this time limit."})}),(0,x.jsx)(N.Field,{name:"session_duration_limit",children:({field:e})=>(0,x.jsx)(l.Input,{...e,"data-lpignore":"true",className:"da-self-exclusion__input",label:_("Minutes"),value:d.session_duration_limit,onChange:r,onBlur:a,maxLength:s,required:!0,error:t.session_duration_limit})})]}),(0,x.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"You will not be able to log in to your account until this date (up to 6 weeks from today)."})}),(0,x.jsx)(N.Field,{name:"timeout_until",children:({field:e})=>(0,x.jsx)(l.DatePicker,{min_date:(0,n.toMoment)().add(1,"days").format("YYYY-MM-DD"),max_date:(0,n.toMoment)().add(6,"weeks").format("YYYY-MM-DD"),...e,className:"da-self-exclusion__input",label:_("Date"),value:d.timeout_until&&(0,n.epochToMoment)(d.timeout_until),onChange:({target:e})=>c("timeout_until",e?.value?(0,n.toMoment)(e.value).unix():"",!0),required:!0,readOnly:!0,error:t.timeout_until})})]}),(0,x.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Your account will be excluded from the website until this date (at least 6 months, up to 5 years)."})}),(0,x.jsx)(N.Field,{name:"exclude_until",children:({field:s})=>(0,x.jsx)(l.DatePicker,{min_date:(0,n.toMoment)().add(6,"months").add(1,"days").format("YYYY-MM-DD"),max_date:(0,n.toMoment)().add(5,"years").format("YYYY-MM-DD"),...s,alignment:e?"bottom":"left",className:"da-self-exclusion__input",label:_("Date"),value:d.exclude_until,onChange:({target:e})=>c("exclude_until",e?.value?(0,n.toMoment)(e.value).format("YYYY-MM-DD"):"",!0),required:!0,autoComplete:"off",readOnly:!0,error:t.exclude_until})})]})]})]})},Y=()=>{const{currency_display:e,getMaxLength:s}=(0,i.useContext)(m),{errors:t,handleBlur:a,handleChange:n,values:r}=(0,N.useFormikContext)(),{localize:c}=(0,o.useTranslations)();return(0,x.jsxs)(i.Fragment,{children:[(0,x.jsx)(C,{title:(0,x.jsx)(o.Localize,{i18n_default_text:"Your maximum account balance and open positions"})}),(0,x.jsxs)("div",{className:"da-self-exclusion__item-wrapper",children:[(0,x.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Once your account balance reaches this amount, you will not be able to deposit funds into your account."})}),(0,x.jsx)(N.Field,{name:"max_balance",children:({field:i})=>(0,x.jsx)(l.Input,{...i,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:r.max_balance,onChange:n,onBlur:a,maxLength:s?.("max_balance"),required:!0,error:t.max_balance})})]}),(0,x.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Maximum open positions"})}),(0,x.jsx)(N.Field,{name:"max_open_bets",children:({field:e})=>(0,x.jsx)(l.Input,{...e,"data-lpignore":"true",className:"da-self-exclusion__input",label:c("No. of open position(s)"),value:r.max_open_bets,onChange:n,onBlur:a,maxLength:s?.("max_open_bets"),required:!0,error:t.max_open_bets})})]})]})]})},F=()=>{const{currency:e,is_mf:s,getMaxLength:t}=(0,i.useContext)(m),{errors:a,handleBlur:n,handleChange:r,values:c}=(0,N.useFormikContext)();return s?(0,x.jsxs)(i.Fragment,{children:[(0,x.jsx)(C,{title:(0,x.jsx)(o.Localize,{i18n_default_text:"Your maximum deposit limit"})}),(0,x.jsxs)("div",{className:"da-self-exclusion__item-wrapper",children:[(0,x.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,x.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,x.jsx)(o.Localize,{i18n_default_text:"24 hours"})}),(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Max. deposit limit"})}),(0,x.jsx)(N.Field,{name:"max_deposit",children:({field:s})=>(0,x.jsx)(l.Input,{...s,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:c.max_deposit,onChange:r,onBlur:n,maxLength:t?.("max_deposit"),required:!0,error:a.max_deposit})})]}),(0,x.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,x.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,x.jsx)(o.Localize,{i18n_default_text:"7 days"})}),(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Max. deposit limit"})}),(0,x.jsx)(N.Field,{name:"max_7day_deposit",children:({field:s})=>(0,x.jsx)(l.Input,{...s,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:c.max_7day_deposit,onChange:r,onBlur:n,maxLength:t?.("max_7day_deposit"),required:!0,error:a.max_7day_deposit})})]}),(0,x.jsxs)("div",{className:"da-self-exclusion__item",children:[(0,x.jsx)("h3",{className:"da-self-exclusion__item-title",children:(0,x.jsx)(o.Localize,{i18n_default_text:"30 days"})}),(0,x.jsx)(l.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Max. deposit limit"})}),(0,x.jsx)(N.Field,{name:"max_30day_deposit",children:({field:s})=>(0,x.jsx)(l.Input,{...s,"data-lpignore":"true",className:"da-self-exclusion__input",label:e,value:c.max_30day_deposit,onChange:r,onBlur:n,maxLength:t?.("max_30day_deposit"),required:!0,error:a.max_30day_deposit})})]})]})]}):null},S=()=>{const{footer_ref:e,goToConfirm:s,is_app_settings:t}=(0,i.useContext)(m),{dirty:a,isSubmitting:n,isValid:r,values:c}=(0,N.useFormikContext)(),d={app_settings:{condition:!!t,components:[T,Y]},deriv_app:{condition:!t,components:[T,M,Y,F]}};return(0,x.jsxs)(i.Fragment,{children:[Object.keys(d).map((e=>{const s=d[e];return s.condition?(0,x.jsx)(i.Fragment,{children:s.components.map(((s,t)=>(0,x.jsx)(s,{},`${e}component${t}`)))},e):null})),e?(0,x.jsx)(L,{}):(0,x.jsx)("div",{className:"da-self-exclusion__button-wrapper",children:(0,x.jsx)(l.Button,{disabled:!a||!r||n,primary:!0,className:"da-self-exclusion__button",large:!0,onClick:()=>s?.(c),type:"button",children:(0,x.jsx)(o.Localize,{i18n_default_text:"Next"})})})]})},D=()=>{const{handleSubmit:e,state:s,validateFields:t}=(0,i.useContext)(m);return(0,x.jsx)(N.Formik,{initialValues:s?.self_exclusions,onSubmit:e,validate:t,children:(0,x.jsx)(N.Form,{className:"da-self-exclusion__form",noValidate:!0,children:s?.is_confirm_page?(0,x.jsx)(z,{}):(0,x.jsx)(S,{})})})},B=(0,j.observer)((({is_app_settings:e,overlay_ref:s,setIsOverlayShown:t})=>{const{client:a,ui:d}=(0,j.useStore)(),{localize:_}=(0,o.useTranslations)(),{currency:u,is_virtual:p,is_switching:g,standpoint:y,is_eu:b,logout:N,landing_company_shortcode:k,getLimits:z}=a,{is_tablet:w}=d,L="maltainvest"===k,C=y.svg,T=Object.freeze({max_number:9999999999999,max_open_positions:999999999,six_weeks:60480}),M={max_deposit:_("Max. deposit limit per day"),max_turnover:_("Max. total stake per day"),max_losses:_("Max. total loss per day"),max_7day_deposit:_("Max. deposit limit over 7 days"),max_7day_turnover:_("Max. total stake over 7 days"),max_7day_losses:_("Max. total loss over 7 days"),max_30day_deposit:_("Max. deposit limit over 30 days"),max_30day_turnover:_("Max. total stake over 30 days"),max_30day_losses:_("Max. total loss over 30 days"),session_duration_limit:_("Time limit per session"),timeout_until:_("Time out until"),exclude_until:_("Excluded from {{brand_website_name}} until",{brand_website_name:(0,n.getBrandWebsiteName)()}),max_balance:_("Max. account balance"),max_open_bets:_("Max. open positions")},Y=(0,i.useRef)(null),F=(0,i.useRef)({}),S=(0,i.useRef)({max_deposit:"",max_turnover:"",max_losses:"",max_7day_deposit:"",max_7day_turnover:"",max_7day_losses:"",max_30day_deposit:"",max_30day_turnover:"",max_30day_losses:"",session_duration_limit:"",timeout_until:"",exclude_until:"",max_balance:"",max_open_bets:""}),B=Object.freeze({changed_attributes:[],error_message:"",is_confirm_page:!1,is_loading:!0,is_success:!1,self_exclusions:S.current,show_article:!1,show_confirm:!1,submit_error_message:""}),I=(0,n.useIsMounted)(),[A,E]=(0,i.useReducer)(((e,s)=>({...e,...s})),B);(0,i.useEffect)((()=>(p?E({is_loading:!1}):(O(),R()),()=>{E({changed_attributes:[]})})),[]),(0,i.useEffect)((()=>{Y.current!==g&&(Y.current=g,P(),O(),R())}),[g]),(0,i.useEffect)((()=>{t?.(!!A?.show_article)}),[A.show_article,t]);const P=()=>E(B),q=e=>(Object.keys(e||{}).forEach((s=>{e[s]=`${e[s]}`})),e),R=()=>{E({is_loading:!0}),n.WS.authorized.getSelfExclusion({get_self_exclusion:1}).then((e=>{(e=>{if(e.error&&I())E({is_loading:!1,error_message:(0,n.getPropertyValue)(e,["error","message"])});else{const s=q((0,n.getPropertyValue)(e,["get_self_exclusion"]));s.timeout_until&&(s.timeout_until=+s.timeout_until),I()&&E({is_loading:!1,self_exclusions:{...S.current,...s}})}})(e)}))},O=()=>{E({is_loading:!0}),z().then((e=>{F.current=e}))};if(p)return(0,x.jsx)(r.A,{});if(A.is_loading||g)return(0,x.jsx)(l.Loading,{is_fullscreen:!1,className:"account__initial-loader"});if(A.error_message)return(0,x.jsx)(c.A,{error_message:A.error_message});const{six_weeks:W}=T,U=(0,n.getCurrencyDisplayCode)(u),V=W.toString().length,$={is_app_settings:e,backFromConfirmLimits:()=>E({is_confirm_page:!1,submit_error_message:""}),backToReview:()=>E({show_confirm:!1}),currency:u,currency_display:U,exclusion_fields_settings:T,exclusion_limits:F,exclusion_texts:M,getMaxLength:e=>{const s=(0,n.getDecimalPlaces)(u),t=t=>t.toString().length+((e=>/session_duration_limit|max_open_bets/.test(e))(e)||0===s?0:s+1);return/max_open_bets/.test(e)&&F.current.get_limits?.open_positions&&!C?t(String(F.current.get_limits.open_positions)):/max_balance/.test(e)&&F.current.get_limits?.account_balance&&!C?t(String(F.current.get_limits.account_balance)):!A.self_exclusions?.[e]||C?/max_open_bets/.test(e)?9:t(String(T.max_number)):t(A.self_exclusions?.[e])},goToConfirm:e=>{const s=Object.keys(e).filter((s=>e[s]!==A.self_exclusions?.[s]));E({changed_attributes:s,is_confirm_page:!0})},handleSubmit:async(e,{setSubmitting:s})=>{const t=["exclude_until","timeout_until"],i=["exclude_until"],a=A.changed_attributes?.some((e=>t.includes(e))),l=()=>new Promise((s=>{const t={set_self_exclusion:1};A.changed_attributes?.forEach((s=>{t[s]=i.includes(s)?e[s]:+e[s]})),n.WS.authorized.setSelfExclusion(t).then((e=>s(e)))}));if(a)if(A.show_confirm){const e=await l();e.error&&I()?E({show_confirm:!1,submit_error_message:e.error.message}):N()}else E({show_confirm:!0});else{const e=await l();e.error&&I()?E({submit_error_message:e.error.message}):(s(!1),I()&&E({show_confirm:!1,is_loading:!0,is_confirm_page:!1}),O(),R())}},is_eu:b,is_mf:L,is_tablet:w,is_wrapper_bypassed:!1,objectValuesToString:q,overlay_ref:s,session_duration_digits:V,state:A,toggleArticle:()=>E({show_article:!A.show_article}),validateFields:e=>{const s={},t=T.max_number,i=T.max_open_positions,a=T.six_weeks,l=_("Please input number greater than 0"),o=e=>0===e?1:`0.${Array(e-1).fill(0).join("")}1`;if(e.timeout_until&&(e.timeout_until<=(0,n.toMoment)().unix()?s.timeout_until=_("Timeout time must be greater than current time."):e.timeout_until>(0,n.toMoment)().add(6,"week").unix()&&(s.timeout_until=_("Timeout time cannot be more than 6 weeks."))),e.exclude_until&&((0,n.toMoment)(e.exclude_until).unix()<(0,n.toMoment)().unix()?s.exclude_until=_("Exclude time must be after today."):(0,n.toMoment)(e.exclude_until).unix()<(0,n.toMoment)().add(6,"month").unix()?s.exclude_until=_("Exclude time cannot be less than 6 months."):(0,n.toMoment)(e.exclude_until).unix()>(0,n.toMoment)().add(5,"year").unix()&&(s.exclude_until=_("Exclude time cannot be for more than five years."))),["max_deposit","max_7day_deposit","max_30day_deposit","max_turnover","max_losses","max_7day_turnover","max_7day_losses","max_30day_turnover","max_30day_losses"].forEach((i=>{if(e[i]){const a=(0,n.validNumber)(e[i],{type:"float",decimals:(0,n.getDecimalPlaces)(u),min:b?Number(o((0,n.getDecimalPlaces)(u))):0,max:Number(b&&A.self_exclusions?.[i])||t}),{is_ok:l,message:r}="object"==typeof a?a:{is_ok:a,message:null};l||(s[i]=r)}!A.self_exclusions?.[i]||e[i]||C||(s[i]=l)})),e.session_duration_limit){const t=(0,n.validNumber)(e.session_duration_limit,{type:"integer",min:Number(b),max:b?A.self_exclusions?.session_duration_limit:a}),{is_ok:i,message:l}="object"==typeof t?t:{is_ok:t,message:null};i||(s.session_duration_limit=l),e.session_duration_limit>a&&(s.session_duration_limit=_("Enter a value in minutes, up to 60480 minutes (equivalent to 6 weeks)."))}if(e.max_open_bets){const t=(0,n.validNumber)(e.max_open_bets,{type:"integer",min:Number(b),max:b&&F.current.get_limits?.open_positions||i}),{is_ok:a,message:l}="object"==typeof t?t:{is_ok:t,message:null};a||(s.max_open_bets=l)}if(e.max_balance){const i=(0,n.validNumber)(e.max_balance,{type:"float",decimals:(0,n.getDecimalPlaces)(u),min:b?Number(o((0,n.getDecimalPlaces)(u))):0,max:b&&F.current.get_limits?.account_balance||t}),{is_ok:a,message:l}="object"==typeof i?i:{is_ok:i,message:null};a||(s.max_balance=l)}return["max_balance","max_open_bets","session_duration_limit"].forEach((t=>{!A.self_exclusions?.[t]||e[t]||C||(s[t]=l)})),s}};return(0,x.jsxs)(m.Provider,{value:$,children:[(0,x.jsxs)(v,{children:[!e&&(0,x.jsx)(h,{}),(0,x.jsx)(D,{})]}),s&&A.show_article&&(0,x.jsx)(f,{is_in_overlay:!0})]})}))}}]);