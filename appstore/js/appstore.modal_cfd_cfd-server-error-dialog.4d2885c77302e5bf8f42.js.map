{"version":3,"file":"appstore/js/appstore.modal_cfd_cfd-server-error-dialog.4d2885c77302e5bf8f42.js","mappings":"4OAyFA,SAjF6BA,EAAAA,EAAAA,WAAS,WAAM,IAAAC,EAChCC,GAAOC,EAAAA,EAAAA,KAAPD,GACAE,EAA0BF,EAA1BE,UAAWC,EAAeH,EAAfG,WACnBC,GACIC,EAAAA,EAAAA,KADIC,EAAaF,EAAbE,cAAeC,EAAaH,EAAbG,cAAeC,EAAUJ,EAAVI,WAAYC,EAAaL,EAAbK,cAAeC,EAAaN,EAAbM,cAAeC,EAA6BP,EAA7BO,8BAE1EC,GAAUC,EAAAA,EAAAA,cACVC,EACFJ,IACCC,GACDH,GACe,kBAAfA,GACe,kBAAfA,GACe,+BAAfA,GACe,yCAAfA,EAEEO,EAAkBN,SAAsB,QAATV,EAAbU,EAAeO,eAAO,IAAAjB,OAAA,EAAtBA,EAAwBkB,SAAS,kBAMnDC,EAAiB,WACnBZ,IACAM,EAAQO,KAAKC,EAAAA,OAAOC,iBACxB,EAEA,OACIP,IACgB,oBAAfN,GAAmD,+BAAfA,IACrCO,EAGIO,IAAAA,cAACC,EAAAA,OAAM,CACHC,OAAOC,EAAAA,EAAAA,UAAS,2BAChBC,qBAAqBD,EAAAA,EAAAA,UAAS,WAC9BE,oBAAoBF,EAAAA,EAAAA,UAAS,cAC7BG,SAnBK,WACbtB,GACJ,EAkBYuB,UAAWX,EACXf,WAAYA,EACZD,UAAWA,EACX4B,gBAAc,EACdC,WAAYjB,IAEXW,EAAAA,EAAAA,UAAS,wEAKlBX,GAAoC,oBAAfN,EAEjBc,IAAAA,cAACC,EAAAA,OAAM,CACHC,OAAOC,EAAAA,EAAAA,UAAS,yBAChBC,qBAAqBD,EAAAA,EAAAA,UAAS,kBAC9BI,UAAWX,EACXf,WAAYA,EACZD,UAAWA,EACX6B,WAAYjB,IAEXW,EAAAA,EAAAA,UAAS,mFAIlBX,EACOP,EACHe,IAAAA,cAACC,EAAAA,OAAM,CACHC,OAAOC,EAAAA,EAAAA,UAAS,yBAChBC,qBAAqBD,EAAAA,EAAAA,UAAS,MAC9BI,UAAWvB,EACXH,WAAYA,EACZD,UAAWA,EACX6B,WAAYjB,GAEXP,GAGLe,IAAAA,cAACU,EAAAA,oBAAmB,MAGrB,IACX,G","sources":["webpack://@deriv/appstore/../cfd/src/Containers/cfd-server-error-dialog.tsx"],"sourcesContent":["import React from 'react';\nimport { Dialog, UnhandledErrorModal } from '@deriv/components';\nimport { localize } from '@deriv/translations';\nimport { observer, useStore } from '@deriv/stores';\nimport { useCfdStore } from '../Stores/Modules/CFD/Helpers/useCfdStores';\nimport { routes } from '@deriv/shared';\nimport { useHistory } from 'react-router';\n\nconst CFDServerErrorDialog = observer(() => {\n    const { ui } = useStore();\n    const { enableApp, disableApp } = ui;\n    const { clearCFDError, error_message, error_type, error_details, has_cfd_error, is_cfd_success_dialog_enabled } =\n        useCfdStore();\n    const history = useHistory();\n    const should_show_error =\n        has_cfd_error &&\n        !is_cfd_success_dialog_enabled &&\n        error_type &&\n        error_type !== 'PasswordReset' &&\n        error_type !== 'PasswordError' &&\n        error_type !== 'IncorrectMT5PasswordFormat' &&\n        error_type !== 'InvalidTradingPlatformPasswordFormat';\n\n    const show_update_pob = error_details?.missing?.includes('place_of_birth');\n\n    const goToHome = () => {\n        clearCFDError();\n    };\n\n    const getRedirection = () => {\n        clearCFDError();\n        history.push(routes.personal_details);\n    };\n\n    if (\n        should_show_error &&\n        (error_type === 'ASK_FIX_DETAILS' || error_type === 'InsufficientAccountDetails') &&\n        show_update_pob\n    ) {\n        return (\n            <Dialog\n                title={localize('Add your place of birth')}\n                confirm_button_text={localize('Add now')}\n                cancel_button_text={localize('Go to Home')}\n                onCancel={goToHome}\n                onConfirm={getRedirection}\n                disableApp={disableApp}\n                enableApp={enableApp}\n                has_close_icon\n                is_visible={should_show_error}\n            >\n                {localize(`You're missing this detail in your profile. Add it now to continue.`)}\n            </Dialog>\n        );\n    }\n\n    if (should_show_error && error_type === 'ASK_FIX_DETAILS') {\n        return (\n            <Dialog\n                title={localize('Complete your profile')}\n                confirm_button_text={localize('Update profile')}\n                onConfirm={getRedirection}\n                disableApp={disableApp}\n                enableApp={enableApp}\n                is_visible={should_show_error}\n            >\n                {localize('To continue, provide the required information in the Personal details section.')}\n            </Dialog>\n        );\n    }\n    if (should_show_error) {\n        return error_message ? (\n            <Dialog\n                title={localize('Somethingâ€™s not right')}\n                confirm_button_text={localize('OK')}\n                onConfirm={clearCFDError}\n                disableApp={disableApp}\n                enableApp={enableApp}\n                is_visible={should_show_error}\n            >\n                {error_message}\n            </Dialog>\n        ) : (\n            <UnhandledErrorModal />\n        );\n    }\n    return null;\n});\n\nexport default CFDServerErrorDialog;\n"],"names":["observer","_error_details$missin","ui","useStore","enableApp","disableApp","_useCfdStore","useCfdStore","clearCFDError","error_message","error_type","error_details","has_cfd_error","is_cfd_success_dialog_enabled","history","useHistory","should_show_error","show_update_pob","missing","includes","getRedirection","push","routes","personal_details","React","Dialog","title","localize","confirm_button_text","cancel_button_text","onCancel","onConfirm","has_close_icon","is_visible","UnhandledErrorModal"],"sourceRoot":""}